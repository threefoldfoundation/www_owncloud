!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(e,n,i){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(n,i))}function l(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(){return d("")}function m(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function h(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?null:+t}function v(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function w(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}function x(t,e){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e)return void(i.selected=!0)}t.selectedIndex=-1}function N(t){const e={};for(const n of t)e[n.name]=n.value;return e}let E;function _(t){E=t}function k(){if(!E)throw new Error("Function called outside component initialization");return E}function P(t){k().$$.on_mount.push(t)}function I(){const t=k();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const s=function(t,e,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,!1,e),i}(e,n);i.slice().forEach((e=>{e.call(t,s)}))}}}function M(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const S=[],O=[],D=[],A=[],C=Promise.resolve();let R=!1;function T(t){D.push(t)}function U(t){A.push(t)}let q=!1;const F=new Set;function H(){if(!q){q=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];_(e),L(e.$$)}for(_(null),S.length=0;O.length;)O.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];F.has(e)||(F.add(e),e())}D.length=0}while(S.length);for(;A.length;)A.pop()();R=!1,q=!1,F.clear()}}function L(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const z=new Set;let B,j;function W(){B={r:0,c:[],p:B}}function V(){B.r||i(B.c),B=B.p}function Z(t,e){t&&t.i&&(z.delete(t),t.i(e))}function G(t,e,n,i){if(t&&t.o){if(z.has(t))return;z.add(t),B.c.push((()=>{z.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function Y(t,e){t.d(1),e.delete(t.key)}function K(t,e){G(t,1,1,(()=>{e.delete(t.key)}))}function X(t,e,n,i,s,r,o,l,a,c,u,d){let f=t.length,p=r.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,b=new Map;for(m=p;m--;){const t=d(s,r,m),l=n(t);let a=o.get(l);a?i&&a.p(t,e):(a=c(l,t),a.c()),$.set(l,g[m]=a),l in h&&b.set(l,Math.abs(m-h[l]))}const v=new Set,y=new Set;function w(t){Z(t,1),t.m(l,u),o.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],i=e.key,s=n.key;e===n?(u=e.first,f--,p--):$.has(s)?!o.has(i)||v.has(i)?w(e):y.has(s)?f--:b.get(i)>b.get(s)?(y.add(i),w(e)):(v.add(s),f--):(a(n,o),f--)}for(;f--;){const e=t[f];$.has(e.key)||a(e,o)}for(;p;)w(g[p-1]);return g}function J(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Q(t){t&&t.c()}function tt(t,n,r,o){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,r),o||T((()=>{const n=a.map(e).filter(s);c?c.push(...n):i(n),t.$$.on_mount=[]})),u.forEach(T)}function et(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(S.push(t),R||(R=!0,C.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function it(e,s,r,o,l,a,u,d=[-1]){const f=E;_(e);const p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||f.$$.root};u&&u(p.root);let m=!1;if(p.ctx=r?r(e,s.props||{},((t,n,...i)=>{const s=i.length?i[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),m&&nt(e,t)),n})):[],p.update(),m=!0,i(p.before_update),p.fragment=!!o&&o(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();s.intro&&Z(e.$$.fragment),tt(e,s.target,s.anchor,s.customElement),H()}_(f)}var st;"function"==typeof HTMLElement&&(j=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(s);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){i(this.$$.on_disconnect)}$destroy(){et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var rt=new Uint8Array(16);function ot(){if(!st&&!(st="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return st(rt)}var lt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function at(t){return"string"==typeof t&&lt.test(t)}for(var ct=[],ut=0;ut<256;++ut)ct.push((ut+256).toString(16).substr(1));function dt(t,e,n){var i=(t=t||{}).random||(t.rng||ot)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=i[s];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ct[t[e+0]]+ct[t[e+1]]+ct[t[e+2]]+ct[t[e+3]]+"-"+ct[t[e+4]]+ct[t[e+5]]+"-"+ct[t[e+6]]+ct[t[e+7]]+"-"+ct[t[e+8]]+ct[t[e+9]]+"-"+ct[t[e+10]]+ct[t[e+11]]+ct[t[e+12]]+ct[t[e+13]]+ct[t[e+14]]+ct[t[e+15]]).toLowerCase();if(!at(n))throw TypeError("Stringified UUID is invalid");return n}(i)}function ft(t){const e=+t;return"number"==typeof e&&!isNaN(e)&&e>0&&e.toFixed(0)===e.toString()}const pt=/^[a-z0-9]+$/i,mt=/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/;function ht(t){return 0===t.length?"Name must be at least 1 character":pt.test(t)?t.length>15?"Name must be at most 15 characters":void 0:"Name can only include alphanumeric characters"}function gt(t){if(!mt.test(t))return"Invalid email format"}function $t(t){return""==t?null:mt.test(t)?void 0:"Invalid email format"}function bt(t){return t=+t,isNaN(t)?"Memory must be a valid number":+t.toFixed(0)!==t?"Memory must be a valid integer":t<250?"Minimum allowed memory is 250 MB":t>262144?"Maximum allowed memory is 256 GB":void 0}function vt(t){return t=+t,isNaN(t)?"Disk size must be a valid number":+t.toFixed(0)!==t?"Disk size must be a valid integer":t<1?"Minimum allowed disk size is 1 GB":t>1e4?"Maximum allowed disk size is 10000 GB":void 0}function yt(t){return t=+t,isNaN(t)?"CPU must be a valid number":+t.toFixed(0)!==t?"CPU cores must be a valid integer":t<1?"Minimum allowed CPU cores is 1":t>32?"Maximum allowed CPU cores is 32":void 0}function wt(t){if(""===t)return null;let e=+t;return isNaN(e)?"Port must be a valid number":e.toFixed(0)!==t?"Port must be a valid integer":e<1?"Minimum allowed port is 1":e>65535?"Maximum allowed port is 65535":void 0}class xt{constructor(t=null,e={publicIPs:null,country:null,farmName:null,cru:null,mru:null,sru:null,update:(t,e)=>{this.filters[t]=e}},n=[]){this.type=t,this.filters=e,this.nodes=n}}class Nt{constructor(t="NW"+dt().split("-")[0],e="10.20.0.0/16"){this.name=t,this.ipRange=e}get valid(){const{name:t,ipRange:e}=this;return""!==t&&""!==e}}class Et{constructor(t=dt(),e="",n=""){this.id=t,this.key=e,this.value=n}get valid(){const{key:t,value:e}=this;return""!==t&&""!==e}}class _t{constructor(t=dt(),e="DISK"+t.split("-")[0],n=50,i="/opt/"){this.id=t,this.name=e,this.size=n,this.mountpoint=i,this.diskFields=[{label:"Name",symbol:"name",placeholder:"Disk Name",type:"text"},{label:"Size",symbol:"size",placeholder:"Disk size in GB",type:"number",validator:vt,invalid:!1},{label:"Mount Point",symbol:"mountpoint",placeholder:"Disk Mount Point",type:"text",validator(t){if(""===(t=t.trim())||"/"===t||!t.startsWith("/"))return"Mount Point must start '/' and can't be positioned at root('/')"},invalid:!1}]}get _diskFieldsValid(){return this.diskFields.reduce(((t,e)=>void 0===e.invalid?t:t&&!e.invalid),!0)}get valid(){const{name:t,size:e,mountpoint:n}=this;let i=n.trim();return""!==t&&ft(e)&&""!==i&&"/"!==i&&i.startsWith("/")&&this._diskFieldsValid}}function kt(t=10,e=[{chars:"abcdefghijklmnopqrstuvwxyz",min:4},{chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",min:3},{chars:"0123456789",min:1},{chars:"!@#$&*?|%+-_./:;=()[]{}`~^",min:2}]){let n="",i=0;e.forEach((function(t){n+=t.chars,i+=t.min})),t<i&&(t=i),e.push({chars:n,min:t-i});let s=Array();return e.forEach((function(t){t.min>0&&s.push(...function(t,e){return Array.from(crypto.getRandomValues(new Uint32Array(t))).map((t=>e[t%e.length]))}(t.min,t.chars))})),function(t){let e,n=t.length;for(;0!=n;)e=Math.floor(Math.random()*n),n--,[t[n],t[e]]=[t[e],t[n]];return t}(s).join("")}const Pt=/^\b((?=[a-z0-9-]{1,63}\.)(xn--)?[a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,63}\b$/;function It(t){return""===t?null:Pt.test(t)?void 0:"Domain name is not valid"}class Mt extends class{constructor(t=dt(),e="VM"+t.split("-")[0],n="https://hub.grid.tf/tf-official-apps/base:latest.flist",i=4,s=8192,r="/sbin/zinit init",o=!0,l=null,a=new Nt,c=[],u=[],d=!1,f=!1,p=new xt){this.id=t,this.name=e,this.flist=n,this.cpu=i,this.memory=s,this.entrypoint=r,this.planetary=o,this.nodeId=l,this.network=a,this.envs=c,this.disks=u,this.publicIp=d,this.publicIp6=f,this.selection=p}get valid(){const{name:t,flist:e,cpu:n,memory:i,entrypoint:s,nodeId:r}=this,{network:o,envs:l,disks:a}=this;return""!==t&&""!==e&&""!==s&&ft(n)&&ft(i)&&ft(r)&&o.valid&&l.reduce(((t,e)=>t&&e.valid),!0)&&a.reduce(((t,e)=>t&&e.valid),!0)}}{constructor(){super(...arguments),this.adminEmail="",this.adminUsername="admin",this.adminPassword=kt(length=Math.floor(5*Math.random())+10),this.smtpFromEmail="",this.smtpHost="",this.smtpPort="",this.smtpHostUser="",this.smtpHostPassword=""}get valid(){const{name:t,flist:e,cpu:n,memory:i,entrypoint:s,nodeId:r}=this,{network:o,envs:l,disks:a}=this,{adminEmail:c,adminUsername:u,adminPassword:d}=this,{smtpFromEmail:f,smtpHost:p,smtpPort:m,smtpHostUser:h,smtpHostPassword:g}=this;return""!==t&&""!==e&&""!==s&&ft(n)&&ft(i)&&ft(r)&&o.valid&&l.reduce(((t,e)=>t&&e.valid),!0)&&a.reduce(((t,e)=>t&&e.valid),!0)&&!gt(c)&&!ht(u)&&""!==d&&!$t(f)&&!$t(h)&&(!It(p)||""===p)&&(ft(m)||""===m)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function St(t,e,n,i){return window.configs.currentDeploymentStore.deploy(e,n),async function(t,e,n=!0){const{networkEnv:i,mnemonics:s,storeSecret:r}=t,o=new window.configs.grid3_client.GridClient(i,s,r,new window.configs.client.HTTPMessageBusClient(0,""),void 0,window.configs.grid3_client.BackendStorageType.tfkvstore);try{await o.connect()}catch(t){}return e(o)}(t,(t=>i(t).then((t=>(window.configs.balanceStore.updateBalance(),t))).finally((()=>{window.configs.currentDeploymentStore.clear()}))))}var Ot,Dt;const{GridClient:At,Nodes:Ct,randomChoice:Rt}=null!==(Dt=null===(Ot=window.configs)||void 0===Ot?void 0:Ot.grid3_client)&&void 0!==Dt?Dt:{};var Tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Ut,qt,Ft=(Ut=function(t){!function(e){var n,i,s,r,o=9e15,l=1e9,a="0123456789abcdef",c="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",u="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",d={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-o,maxE:o,crypto:!1},f=!0,p="[DecimalError] ",m=p+"Invalid argument: ",h=p+"Precision limit exceeded",g=p+"crypto unavailable",$="[object Decimal]",b=Math.floor,v=Math.pow,y=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,x=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,N=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,_=c.length-1,k=u.length-1,P={toStringTag:$};function I(t){var e,n,i,s=t.length-1,r="",o=t[0];if(s>0){for(r+=o,e=1;e<s;e++)(n=7-(i=t[e]+"").length)&&(r+=F(n)),r+=i;(n=7-(i=(o=t[e])+"").length)&&(r+=F(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return r+o}function M(t,e,n){if(t!==~~t||t<e||t>n)throw Error(m+t)}function S(t,e,n,i){var s,r,o,l;for(r=t[0];r>=10;r/=10)--e;return--e<0?(e+=7,s=0):(s=Math.ceil((e+1)/7),e%=7),r=v(10,7-e),l=t[s]%r|0,null==i?e<3?(0==e?l=l/100|0:1==e&&(l=l/10|0),o=n<4&&99999==l||n>3&&49999==l||5e4==l||0==l):o=(n<4&&l+1==r||n>3&&l+1==r/2)&&(t[s+1]/r/100|0)==v(10,e-2)-1||(l==r/2||0==l)&&0==(t[s+1]/r/100|0):e<4?(0==e?l=l/1e3|0:1==e?l=l/100|0:2==e&&(l=l/10|0),o=(i||n<4)&&9999==l||!i&&n>3&&4999==l):o=((i||n<4)&&l+1==r||!i&&n>3&&l+1==r/2)&&(t[s+1]/r/1e3|0)==v(10,e-3)-1,o}function O(t,e,n){for(var i,s,r=[0],o=0,l=t.length;o<l;){for(s=r.length;s--;)r[s]*=e;for(r[0]+=a.indexOf(t.charAt(o++)),i=0;i<r.length;i++)r[i]>n-1&&(void 0===r[i+1]&&(r[i+1]=0),r[i+1]+=r[i]/n|0,r[i]%=n)}return r.reverse()}P.absoluteValue=P.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),A(t)},P.ceil=function(){return A(new this.constructor(this),this.e+1,2)},P.clampedTo=P.clamp=function(t,e){var n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(m+e);return n.cmp(t)<0?t:n.cmp(e)>0?e:new i(n)},P.comparedTo=P.cmp=function(t){var e,n,i,s,r=this,o=r.d,l=(t=new r.constructor(t)).d,a=r.s,c=t.s;if(!o||!l)return a&&c?a!==c?a:o===l?0:!o^a<0?1:-1:NaN;if(!o[0]||!l[0])return o[0]?a:l[0]?-c:0;if(a!==c)return a;if(r.e!==t.e)return r.e>t.e^a<0?1:-1;for(e=0,n=(i=o.length)<(s=l.length)?i:s;e<n;++e)if(o[e]!==l[e])return o[e]>l[e]^a<0?1:-1;return i===s?0:i>s^a<0?1:-1},P.cosine=P.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(t,e){var n,i,s;if(e.isZero())return e;(i=e.d.length)<32?s=(1/Y(4,n=Math.ceil(i/3))).toString():(n=16,s="2.3283064365386962890625e-10"),t.precision+=n,e=G(t,1,e.times(s),new t(1));for(var r=n;r--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}(i,K(i,n)),i.precision=t,i.rounding=e,A(2==r||3==r?n.neg():n,t,e,!0)):new i(1):new i(NaN)},P.cubeRoot=P.cbrt=function(){var t,e,n,i,s,r,o,l,a,c,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(f=!1,(r=u.s*v(u.s*u,1/3))&&Math.abs(r)!=1/0?i=new d(r.toString()):(n=I(u.d),(r=((t=u.e)-n.length+1)%3)&&(n+=1==r||-2==r?"0":"00"),r=v(n,1/3),t=b((t+1)/3)-(t%3==(t<0?-1:2)),(i=new d(n=r==1/0?"5e"+t:(n=r.toExponential()).slice(0,n.indexOf("e")+1)+t)).s=u.s),o=(t=d.precision)+3;;)if(c=(a=(l=i).times(l).times(l)).plus(u),i=D(c.plus(u).times(l),c.plus(a),o+2,1),I(l.d).slice(0,o)===(n=I(i.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(s||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(A(i,t+1,1),e=!i.times(i).times(i).eq(u));break}if(!s&&(A(l,t+1,0),l.times(l).times(l).eq(u))){i=l;break}o+=4,s=1}return f=!0,A(i,t,d.rounding,e)},P.decimalPlaces=P.dp=function(){var t,e=this.d,n=NaN;if(e){if(n=7*((t=e.length-1)-b(this.e/7)),t=e[t])for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n},P.dividedBy=P.div=function(t){return D(this,new this.constructor(t))},P.dividedToIntegerBy=P.divToInt=function(t){var e=this.constructor;return A(D(this,new e(t),0,1,1),e.precision,e.rounding)},P.equals=P.eq=function(t){return 0===this.cmp(t)},P.floor=function(){return A(new this.constructor(this),this.e+1,3)},P.greaterThan=P.gt=function(t){return this.cmp(t)>0},P.greaterThanOrEqualTo=P.gte=function(t){var e=this.cmp(t);return 1==e||0===e},P.hyperbolicCosine=P.cosh=function(){var t,e,n,i,s,r=this,o=r.constructor,l=new o(1);if(!r.isFinite())return new o(r.s?1/0:NaN);if(r.isZero())return l;n=o.precision,i=o.rounding,o.precision=n+Math.max(r.e,r.sd())+4,o.rounding=1,(s=r.d.length)<32?e=(1/Y(4,t=Math.ceil(s/3))).toString():(t=16,e="2.3283064365386962890625e-10"),r=G(o,1,r.times(e),new o(1),!0);for(var a,c=t,u=new o(8);c--;)a=r.times(r),r=l.minus(a.times(u.minus(a.times(u))));return A(r,o.precision=n,o.rounding=i,!0)},P.hyperbolicSine=P.sinh=function(){var t,e,n,i,s=this,r=s.constructor;if(!s.isFinite()||s.isZero())return new r(s);if(e=r.precision,n=r.rounding,r.precision=e+Math.max(s.e,s.sd())+4,r.rounding=1,(i=s.d.length)<3)s=G(r,2,s,s,!0);else{t=(t=1.4*Math.sqrt(i))>16?16:0|t,s=G(r,2,s=s.times(1/Y(5,t)),s,!0);for(var o,l=new r(5),a=new r(16),c=new r(20);t--;)o=s.times(s),s=s.times(l.plus(o.times(a.times(o).plus(c))))}return r.precision=e,r.rounding=n,A(s,e,n,!0)},P.hyperbolicTangent=P.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,D(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)},P.inverseCosine=P.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),s=n.precision,r=n.rounding;return-1!==i?0===i?e.isNeg()?U(n,s,r):new n(0):new n(NaN):e.isZero()?U(n,s+4,r).times(.5):(n.precision=s+6,n.rounding=1,e=e.asin(),t=U(n,s+4,r).times(.5),n.precision=s,n.rounding=r,t.minus(e))},P.inverseHyperbolicCosine=P.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,f=!1,n=n.times(n).minus(1).sqrt().plus(n),f=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)},P.inverseHyperbolicSine=P.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,f=!1,n=n.times(n).plus(1).sqrt().plus(n),f=!0,i.precision=t,i.rounding=e,n.ln())},P.inverseHyperbolicTangent=P.atanh=function(){var t,e,n,i,s=this,r=s.constructor;return s.isFinite()?s.e>=0?new r(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=r.precision,e=r.rounding,i=s.sd(),Math.max(i,t)<2*-s.e-1?A(new r(s),t,e,!0):(r.precision=n=i-s.e,s=D(s.plus(1),new r(1).minus(s),n+t,1),r.precision=t+4,r.rounding=1,s=s.ln(),r.precision=t,r.rounding=e,s.times(.5))):new r(NaN)},P.inverseSine=P.asin=function(){var t,e,n,i,s=this,r=s.constructor;return s.isZero()?new r(s):(e=s.abs().cmp(1),n=r.precision,i=r.rounding,-1!==e?0===e?((t=U(r,n+4,i).times(.5)).s=s.s,t):new r(NaN):(r.precision=n+6,r.rounding=1,s=s.div(new r(1).minus(s.times(s)).sqrt().plus(1)).atan(),r.precision=n,r.rounding=i,s.times(2)))},P.inverseTangent=P.atan=function(){var t,e,n,i,s,r,o,l,a,c=this,u=c.constructor,d=u.precision,p=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&d+4<=k)return(o=U(u,d+4,p).times(.25)).s=c.s,o}else{if(!c.s)return new u(NaN);if(d+4<=k)return(o=U(u,d+4,p).times(.5)).s=c.s,o}for(u.precision=l=d+10,u.rounding=1,t=n=Math.min(28,l/7+2|0);t;--t)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(f=!1,e=Math.ceil(l/7),i=1,a=c.times(c),o=new u(c),s=c;-1!==t;)if(s=s.times(a),r=o.minus(s.div(i+=2)),s=s.times(a),void 0!==(o=r.plus(s.div(i+=2))).d[e])for(t=e;o.d[t]===r.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),f=!0,A(o,u.precision=d,u.rounding=p,!0)},P.isFinite=function(){return!!this.d},P.isInteger=P.isInt=function(){return!!this.d&&b(this.e/7)>this.d.length-2},P.isNaN=function(){return!this.s},P.isNegative=P.isNeg=function(){return this.s<0},P.isPositive=P.isPos=function(){return this.s>0},P.isZero=function(){return!!this.d&&0===this.d[0]},P.lessThan=P.lt=function(t){return this.cmp(t)<0},P.lessThanOrEqualTo=P.lte=function(t){return this.cmp(t)<1},P.logarithm=P.log=function(t){var e,n,i,s,r,o,l,a,c=this,u=c.constructor,d=u.precision,p=u.rounding;if(null==t)t=new u(10),e=!0;else{if(n=(t=new u(t)).d,t.s<0||!n||!n[0]||t.eq(1))return new u(NaN);e=t.eq(10)}if(n=c.d,c.s<0||!n||!n[0]||c.eq(1))return new u(n&&!n[0]?-1/0:1!=c.s?NaN:n?0:1/0);if(e)if(n.length>1)r=!0;else{for(s=n[0];s%10==0;)s/=10;r=1!==s}if(f=!1,o=j(c,l=d+5),i=e?T(u,l+10):j(t,l),S((a=D(o,i,l,1)).d,s=d,p))do{if(o=j(c,l+=10),i=e?T(u,l+10):j(t,l),a=D(o,i,l,1),!r){+I(a.d).slice(s+1,s+15)+1==1e14&&(a=A(a,d+1,0));break}}while(S(a.d,s+=10,p));return f=!0,A(a,d,p)},P.minus=P.sub=function(t){var e,n,i,s,r,o,l,a,c,u,d,p,m=this,h=m.constructor;if(t=new h(t),!m.d||!t.d)return m.s&&t.s?m.d?t.s=-t.s:t=new h(t.d||m.s!==t.s?m:NaN):t=new h(NaN),t;if(m.s!=t.s)return t.s=-t.s,m.plus(t);if(c=m.d,p=t.d,l=h.precision,a=h.rounding,!c[0]||!p[0]){if(p[0])t.s=-t.s;else{if(!c[0])return new h(3===a?-0:0);t=new h(m)}return f?A(t,l,a):t}if(n=b(t.e/7),u=b(m.e/7),c=c.slice(),r=u-n){for((d=r<0)?(e=c,r=-r,o=p.length):(e=p,n=u,o=c.length),r>(i=Math.max(Math.ceil(l/7),o)+2)&&(r=i,e.length=1),e.reverse(),i=r;i--;)e.push(0);e.reverse()}else{for((d=(i=c.length)<(o=p.length))&&(o=i),i=0;i<o;i++)if(c[i]!=p[i]){d=c[i]<p[i];break}r=0}for(d&&(e=c,c=p,p=e,t.s=-t.s),o=c.length,i=p.length-o;i>0;--i)c[o++]=0;for(i=p.length;i>r;){if(c[--i]<p[i]){for(s=i;s&&0===c[--s];)c[s]=E-1;--c[s],c[i]+=E}c[i]-=p[i]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=R(c,n),f?A(t,l,a):t):new h(3===a?-0:0)},P.modulo=P.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?A(new i(n),i.precision,i.rounding):(f=!1,9==i.modulo?(e=D(n,t.abs(),0,3,1)).s*=t.s:e=D(n,t,0,i.modulo,1),e=e.times(t),f=!0,n.minus(e))},P.naturalExponential=P.exp=function(){return B(this)},P.naturalLogarithm=P.ln=function(){return j(this)},P.negated=P.neg=function(){var t=new this.constructor(this);return t.s=-t.s,A(t)},P.plus=P.add=function(t){var e,n,i,s,r,o,l,a,c,u,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return d.s&&t.s?d.d||(t=new p(t.d||d.s===t.s?d:NaN)):t=new p(NaN),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(c=d.d,u=t.d,l=p.precision,a=p.rounding,!c[0]||!u[0])return u[0]||(t=new p(d)),f?A(t,l,a):t;if(r=b(d.e/7),i=b(t.e/7),c=c.slice(),s=r-i){for(s<0?(n=c,s=-s,o=u.length):(n=u,i=r,o=c.length),s>(o=(r=Math.ceil(l/7))>o?r+1:o+1)&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((o=c.length)-(s=u.length)<0&&(s=o,n=u,u=c,c=n),e=0;s;)e=(c[--s]=c[s]+u[s]+e)/E|0,c[s]%=E;for(e&&(c.unshift(e),++i),o=c.length;0==c[--o];)c.pop();return t.d=c,t.e=R(c,i),f?A(t,l,a):t},P.precision=P.sd=function(t){var e,n=this;if(void 0!==t&&t!==!!t&&1!==t&&0!==t)throw Error(m+t);return n.d?(e=q(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e},P.round=function(){var t=this,e=t.constructor;return A(new e(t),t.e+1,e.rounding)},P.sine=P.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+7,i.rounding=1,n=function(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:G(t,2,e,e);n=(n=1.4*Math.sqrt(i))>16?16:0|n,e=e.times(1/Y(5,n)),e=G(t,2,e,e);for(var s,r=new t(5),o=new t(16),l=new t(20);n--;)s=e.times(e),e=e.times(r.plus(s.times(o.times(s).minus(l))));return e}(i,K(i,n)),i.precision=t,i.rounding=e,A(r>2?n.neg():n,t,e,!0)):new i(NaN)},P.squareRoot=P.sqrt=function(){var t,e,n,i,s,r,o=this,l=o.d,a=o.e,c=o.s,u=o.constructor;if(1!==c||!l||!l[0])return new u(!c||c<0&&(!l||l[0])?NaN:l?o:1/0);for(f=!1,0==(c=Math.sqrt(+o))||c==1/0?(((e=I(l)).length+a)%2==0&&(e+="0"),c=Math.sqrt(e),a=b((a+1)/2)-(a<0||a%2),i=new u(e=c==1/0?"5e"+a:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+a)):i=new u(c.toString()),n=(a=u.precision)+3;;)if(i=(r=i).plus(D(o,r,n+2,1)).times(.5),I(r.d).slice(0,n)===(e=I(i.d)).slice(0,n)){if("9999"!=(e=e.slice(n-3,n+1))&&(s||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(A(i,a+1,1),t=!i.times(i).eq(o));break}if(!s&&(A(r,a+1,0),r.times(r).eq(o))){i=r;break}n+=4,s=1}return f=!0,A(i,a,u.rounding,t)},P.tangent=P.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,(n=n.sin()).s=1,n=D(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,A(2==r||4==r?n.neg():n,t,e,!0)):new i(NaN)},P.times=P.mul=function(t){var e,n,i,s,r,o,l,a,c,u=this,d=u.constructor,p=u.d,m=(t=new d(t)).d;if(t.s*=u.s,!(p&&p[0]&&m&&m[0]))return new d(!t.s||p&&!p[0]&&!m||m&&!m[0]&&!p?NaN:p&&m?0*t.s:t.s/0);for(n=b(u.e/7)+b(t.e/7),(a=p.length)<(c=m.length)&&(r=p,p=m,m=r,o=a,a=c,c=o),r=[],i=o=a+c;i--;)r.push(0);for(i=c;--i>=0;){for(e=0,s=a+i;s>i;)l=r[s]+m[i]*p[s-i-1]+e,r[s--]=l%E|0,e=l/E|0;r[s]=(r[s]+e)%E|0}for(;!r[--o];)r.pop();return e?++n:r.shift(),t.d=r,t.e=R(r,n),f?A(t,d.precision,d.rounding):t},P.toBinary=function(t,e){return X(this,2,t,e)},P.toDecimalPlaces=P.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),void 0===t?n:(M(t,0,l),void 0===e?e=i.rounding:M(e,0,8),A(n,t+n.e+1,e))},P.toExponential=function(t,e){var n,i=this,s=i.constructor;return void 0===t?n=C(i,!0):(M(t,0,l),void 0===e?e=s.rounding:M(e,0,8),n=C(i=A(new s(i),t+1,e),!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n},P.toFixed=function(t,e){var n,i,s=this,r=s.constructor;return void 0===t?n=C(s):(M(t,0,l),void 0===e?e=r.rounding:M(e,0,8),n=C(i=A(new r(s),t+s.e+1,e),!1,t+i.e+1)),s.isNeg()&&!s.isZero()?"-"+n:n},P.toFraction=function(t){var e,n,i,s,r,o,l,a,c,u,d,p,h=this,g=h.d,$=h.constructor;if(!g)return new $(h);if(c=n=new $(1),i=a=new $(0),o=(r=(e=new $(i)).e=q(g)-h.e-1)%7,e.d[0]=v(10,o<0?7+o:o),null==t)t=r>0?e:c;else{if(!(l=new $(t)).isInt()||l.lt(c))throw Error(m+l);t=l.gt(e)?r>0?e:c:l}for(f=!1,l=new $(I(g)),u=$.precision,$.precision=r=7*g.length*2;d=D(l,e,0,1,1),1!=(s=n.plus(d.times(i))).cmp(t);)n=i,i=s,s=c,c=a.plus(d.times(s)),a=s,s=e,e=l.minus(d.times(s)),l=s;return s=D(t.minus(n),i,0,1,1),a=a.plus(s.times(c)),n=n.plus(s.times(i)),a.s=c.s=h.s,p=D(c,i,r,1).minus(h).abs().cmp(D(a,n,r,1).minus(h).abs())<1?[c,i]:[a,n],$.precision=u,f=!0,p},P.toHexadecimal=P.toHex=function(t,e){return X(this,16,t,e)},P.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),null==t){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),void 0===e?e=i.rounding:M(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(f=!1,n=D(n,t,0,e,1).times(t),f=!0,A(n)):(t.s=n.s,n=t),n},P.toNumber=function(){return+this},P.toOctal=function(t,e){return X(this,8,t,e)},P.toPower=P.pow=function(t){var e,n,i,s,r,o,l=this,a=l.constructor,c=+(t=new a(t));if(!(l.d&&t.d&&l.d[0]&&t.d[0]))return new a(v(+l,c));if((l=new a(l)).eq(1))return l;if(i=a.precision,r=a.rounding,t.eq(1))return A(l,i,r);if((e=b(t.e/7))>=t.d.length-1&&(n=c<0?-c:c)<=9007199254740991)return s=H(a,l,n,i),t.s<0?new a(1).div(s):A(s,i,r);if((o=l.s)<0){if(e<t.d.length-1)return new a(NaN);if(0==(1&t.d[e])&&(o=1),0==l.e&&1==l.d[0]&&1==l.d.length)return l.s=o,l}return(e=0!=(n=v(+l,c))&&isFinite(n)?new a(n+"").e:b(c*(Math.log("0."+I(l.d))/Math.LN10+l.e+1)))>a.maxE+1||e<a.minE-1?new a(e>0?o/0:0):(f=!1,a.rounding=l.s=1,n=Math.min(12,(e+"").length),(s=B(t.times(j(l,i+n)),i)).d&&S((s=A(s,i+5,1)).d,i,r)&&(e=i+10,+I((s=A(B(t.times(j(l,e+n)),e),e+5,1)).d).slice(i+1,i+15)+1==1e14&&(s=A(s,i+1,0))),s.s=o,f=!0,a.rounding=r,A(s,i,r))},P.toPrecision=function(t,e){var n,i=this,s=i.constructor;return void 0===t?n=C(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(M(t,1,l),void 0===e?e=s.rounding:M(e,0,8),n=C(i=A(new s(i),t,e),t<=i.e||i.e<=s.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n},P.toSignificantDigits=P.toSD=function(t,e){var n=this.constructor;return void 0===t?(t=n.precision,e=n.rounding):(M(t,1,l),void 0===e?e=n.rounding:M(e,0,8)),A(new n(this),t,e)},P.toString=function(){var t=this,e=t.constructor,n=C(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n},P.truncated=P.trunc=function(){return A(new this.constructor(this),this.e+1,1)},P.valueOf=P.toJSON=function(){var t=this,e=t.constructor,n=C(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};var D=function(){function t(t,e,n){var i,s=0,r=t.length;for(t=t.slice();r--;)i=t[r]*e+s,t[r]=i%n|0,s=i/n|0;return s&&t.unshift(s),t}function e(t,e,n,i){var s,r;if(n!=i)r=n>i?1:-1;else for(s=r=0;s<n;s++)if(t[s]!=e[s]){r=t[s]>e[s]?1:-1;break}return r}function n(t,e,n,i){for(var s=0;n--;)t[n]-=s,s=t[n]<e[n]?1:0,t[n]=s*i+t[n]-e[n];for(;!t[0]&&t.length>1;)t.shift()}return function(s,r,o,l,a,c){var u,d,f,p,m,h,g,$,v,y,w,x,N,_,k,P,I,M,S,O,D=s.constructor,C=s.s==r.s?1:-1,R=s.d,T=r.d;if(!(R&&R[0]&&T&&T[0]))return new D(s.s&&r.s&&(R?!T||R[0]!=T[0]:T)?R&&0==R[0]||!T?0*C:C/0:NaN);for(c?(m=1,d=s.e-r.e):(c=E,m=7,d=b(s.e/m)-b(r.e/m)),S=T.length,I=R.length,y=(v=new D(C)).d=[],f=0;T[f]==(R[f]||0);f++);if(T[f]>(R[f]||0)&&d--,null==o?(_=o=D.precision,l=D.rounding):_=a?o+(s.e-r.e)+1:o,_<0)y.push(1),h=!0;else{if(_=_/m+2|0,f=0,1==S){for(p=0,T=T[0],_++;(f<I||p)&&_--;f++)k=p*c+(R[f]||0),y[f]=k/T|0,p=k%T|0;h=p||f<I}else{for((p=c/(T[0]+1)|0)>1&&(T=t(T,p,c),R=t(R,p,c),S=T.length,I=R.length),P=S,x=(w=R.slice(0,S)).length;x<S;)w[x++]=0;(O=T.slice()).unshift(0),M=T[0],T[1]>=c/2&&++M;do{p=0,(u=e(T,w,S,x))<0?(N=w[0],S!=x&&(N=N*c+(w[1]||0)),(p=N/M|0)>1?(p>=c&&(p=c-1),1==(u=e(g=t(T,p,c),w,$=g.length,x=w.length))&&(p--,n(g,S<$?O:T,$,c))):(0==p&&(u=p=1),g=T.slice()),($=g.length)<x&&g.unshift(0),n(w,g,x,c),-1==u&&(u=e(T,w,S,x=w.length))<1&&(p++,n(w,S<x?O:T,x,c)),x=w.length):0===u&&(p++,w=[0]),y[f++]=p,u&&w[0]?w[x++]=R[P]||0:(w=[R[P]],x=1)}while((P++<I||void 0!==w[0])&&_--);h=void 0!==w[0]}y[0]||y.shift()}if(1==m)v.e=d,i=h;else{for(f=1,p=y[0];p>=10;p/=10)f++;v.e=f+d*m-1,A(v,a?o+v.e+1:o,l,h)}return v}}();function A(t,e,n,i){var s,r,o,l,a,c,u,d,p,m=t.constructor;t:if(null!=e){if(!(d=t.d))return t;for(s=1,l=d[0];l>=10;l/=10)s++;if((r=e-s)<0)r+=7,o=e,a=(u=d[p=0])/v(10,s-o-1)%10|0;else if((p=Math.ceil((r+1)/7))>=(l=d.length)){if(!i)break t;for(;l++<=p;)d.push(0);u=a=0,s=1,o=(r%=7)-7+1}else{for(u=l=d[p],s=1;l>=10;l/=10)s++;a=(o=(r%=7)-7+s)<0?0:u/v(10,s-o-1)%10|0}if(i=i||e<0||void 0!==d[p+1]||(o<0?u:u%v(10,s-o-1)),c=n<4?(a||i)&&(0==n||n==(t.s<0?3:2)):a>5||5==a&&(4==n||i||6==n&&(r>0?o>0?u/v(10,s-o):0:d[p-1])%10&1||n==(t.s<0?8:7)),e<1||!d[0])return d.length=0,c?(e-=t.e+1,d[0]=v(10,(7-e%7)%7),t.e=-e||0):d[0]=t.e=0,t;if(0==r?(d.length=p,l=1,p--):(d.length=p+1,l=v(10,7-r),d[p]=o>0?(u/v(10,s-o)%v(10,o)|0)*l:0),c)for(;;){if(0==p){for(r=1,o=d[0];o>=10;o/=10)r++;for(o=d[0]+=l,l=1;o>=10;o/=10)l++;r!=l&&(t.e++,d[0]==E&&(d[0]=1));break}if(d[p]+=l,d[p]!=E)break;d[p--]=0,l=1}for(r=d.length;0===d[--r];)d.pop()}return f&&(t.e>m.maxE?(t.d=null,t.e=NaN):t.e<m.minE&&(t.e=0,t.d=[0])),t}function C(t,e,n){if(!t.isFinite())return W(t);var i,s=t.e,r=I(t.d),o=r.length;return e?(n&&(i=n-o)>0?r=r.charAt(0)+"."+r.slice(1)+F(i):o>1&&(r=r.charAt(0)+"."+r.slice(1)),r=r+(t.e<0?"e":"e+")+t.e):s<0?(r="0."+F(-s-1)+r,n&&(i=n-o)>0&&(r+=F(i))):s>=o?(r+=F(s+1-o),n&&(i=n-s-1)>0&&(r=r+"."+F(i))):((i=s+1)<o&&(r=r.slice(0,i)+"."+r.slice(i)),n&&(i=n-o)>0&&(s+1===o&&(r+="."),r+=F(i))),r}function R(t,e){var n=t[0];for(e*=7;n>=10;n/=10)e++;return e}function T(t,e,n){if(e>_)throw f=!0,n&&(t.precision=n),Error(h);return A(new t(c),e,1,!0)}function U(t,e,n){if(e>k)throw Error(h);return A(new t(u),e,n,!0)}function q(t){var e=t.length-1,n=7*e+1;if(e=t[e]){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function F(t){for(var e="";t--;)e+="0";return e}function H(t,e,n,i){var s,r=new t(1),o=Math.ceil(i/7+4);for(f=!1;;){if(n%2&&J((r=r.times(e)).d,o)&&(s=!0),0===(n=b(n/2))){n=r.d.length-1,s&&0===r.d[n]&&++r.d[n];break}J((e=e.times(e)).d,o)}return f=!0,r}function L(t){return 1&t.d[t.d.length-1]}function z(t,e,n){for(var i,s=new t(e[0]),r=0;++r<e.length;){if(!(i=new t(e[r])).s){s=i;break}s[n](i)&&(s=i)}return s}function B(t,e){var n,i,s,r,o,l,a,c=0,u=0,d=0,p=t.constructor,m=p.rounding,h=p.precision;if(!t.d||!t.d[0]||t.e>17)return new p(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(null==e?(f=!1,a=h):a=e,l=new p(.03125);t.e>-2;)t=t.times(l),d+=5;for(a+=i=Math.log(v(2,d))/Math.LN10*2+5|0,n=r=o=new p(1),p.precision=a;;){if(r=A(r.times(t),a,1),n=n.times(++u),I((l=o.plus(D(r,n,a,1))).d).slice(0,a)===I(o.d).slice(0,a)){for(s=d;s--;)o=A(o.times(o),a,1);if(null!=e)return p.precision=h,o;if(!(c<3&&S(o.d,a-i,m,c)))return A(o,p.precision=h,m,f=!0);p.precision=a+=10,n=r=l=new p(1),u=0,c++}o=l}}function j(t,e){var n,i,s,r,o,l,a,c,u,d,p,m=1,h=t,g=h.d,$=h.constructor,b=$.rounding,v=$.precision;if(h.s<0||!g||!g[0]||!h.e&&1==g[0]&&1==g.length)return new $(g&&!g[0]?-1/0:1!=h.s?NaN:g?0:h);if(null==e?(f=!1,u=v):u=e,$.precision=u+=10,i=(n=I(g)).charAt(0),!(Math.abs(r=h.e)<15e14))return c=T($,u+2,v).times(r+""),h=j(new $(i+"."+n.slice(1)),u-10).plus(c),$.precision=v,null==e?A(h,v,b,f=!0):h;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=I((h=h.times(t)).d)).charAt(0),m++;for(r=h.e,i>1?(h=new $("0."+n),r++):h=new $(i+"."+n.slice(1)),d=h,a=o=h=D(h.minus(1),h.plus(1),u,1),p=A(h.times(h),u,1),s=3;;){if(o=A(o.times(p),u,1),I((c=a.plus(D(o,new $(s),u,1))).d).slice(0,u)===I(a.d).slice(0,u)){if(a=a.times(2),0!==r&&(a=a.plus(T($,u+2,v).times(r+""))),a=D(a,new $(m),u,1),null!=e)return $.precision=v,a;if(!S(a.d,u-10,b,l))return A(a,$.precision=v,b,f=!0);$.precision=u+=10,c=o=h=D(d.minus(1),d.plus(1),u,1),p=A(h.times(h),u,1),s=l=1}a=c,s+=2}}function W(t){return String(t.s*t.s/0)}function V(t,e){var n,i,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;48===e.charCodeAt(i);i++);for(s=e.length;48===e.charCodeAt(s-1);--s);if(e=e.slice(i,s)){if(s-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%7,n<0&&(i+=7),i<s){for(i&&t.d.push(+e.slice(0,i)),s-=7;i<s;)t.d.push(+e.slice(i,i+=7));i=7-(e=e.slice(i)).length}else i-=s;for(;i--;)e+="0";t.d.push(+e),f&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Z(t,e){var i,s,r,o,l,a,c,u,d;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),N.test(e))return V(t,e)}else if("Infinity"===e||"NaN"===e)return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(w.test(e))i=16,e=e.toLowerCase();else if(y.test(e))i=2;else{if(!x.test(e))throw Error(m+e);i=8}for((o=e.search(/p/i))>0?(c=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),l=(o=e.indexOf("."))>=0,s=t.constructor,l&&(o=(a=(e=e.replace(".","")).length)-o,r=H(s,new s(i),o,2*o)),o=d=(u=O(e,i,E)).length-1;0===u[o];--o)u.pop();return o<0?new s(0*t.s):(t.e=R(u,d),t.d=u,f=!1,l&&(t=D(t,r,4*a)),c&&(t=t.times(Math.abs(c)<54?v(2,c):n.pow(2,c))),f=!0,t)}function G(t,e,n,i,s){var r,o,l,a,c=t.precision,u=Math.ceil(c/7);for(f=!1,a=n.times(n),l=new t(i);;){if(o=D(l.times(a),new t(e++*e++),c,1),l=s?i.plus(o):i.minus(o),i=D(o.times(a),new t(e++*e++),c,1),void 0!==(o=l.plus(i)).d[u]){for(r=u;o.d[r]===l.d[r]&&r--;);if(-1==r)break}r=l,l=i,i=o,o=r}return f=!0,o.d.length=u+1,o}function Y(t,e){for(var n=t;--e;)n*=t;return n}function K(t,e){var n,i=e.s<0,s=U(t,t.precision,1),o=s.times(.5);if((e=e.abs()).lte(o))return r=i?4:1,e;if((n=e.divToInt(s)).isZero())r=i?3:2;else{if((e=e.minus(n.times(s))).lte(o))return r=L(n)?i?2:3:i?4:1,e;r=L(n)?i?1:4:i?3:2}return e.minus(s).abs()}function X(t,e,n,s){var r,o,c,u,d,f,p,m,h,g=t.constructor,$=void 0!==n;if($?(M(n,1,l),void 0===s?s=g.rounding:M(s,0,8)):(n=g.precision,s=g.rounding),t.isFinite()){for($?(r=2,16==e?n=4*n-3:8==e&&(n=3*n-2)):r=e,(c=(p=C(t)).indexOf("."))>=0&&(p=p.replace(".",""),(h=new g(1)).e=p.length-c,h.d=O(C(h),10,r),h.e=h.d.length),o=d=(m=O(p,10,r)).length;0==m[--d];)m.pop();if(m[0]){if(c<0?o--:((t=new g(t)).d=m,t.e=o,m=(t=D(t,h,n,s,0,r)).d,o=t.e,f=i),c=m[n],u=r/2,f=f||void 0!==m[n+1],f=s<4?(void 0!==c||f)&&(0===s||s===(t.s<0?3:2)):c>u||c===u&&(4===s||f||6===s&&1&m[n-1]||s===(t.s<0?8:7)),m.length=n,f)for(;++m[--n]>r-1;)m[n]=0,n||(++o,m.unshift(1));for(d=m.length;!m[d-1];--d);for(c=0,p="";c<d;c++)p+=a.charAt(m[c]);if($){if(d>1)if(16==e||8==e){for(c=16==e?4:3,--d;d%c;d++)p+="0";for(d=(m=O(p,r,e)).length;!m[d-1];--d);for(c=1,p="1.";c<d;c++)p+=a.charAt(m[c])}else p=p.charAt(0)+"."+p.slice(1);p=p+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)p="0"+p;p="0."+p}else if(++o>d)for(o-=d;o--;)p+="0";else o<d&&(p=p.slice(0,o)+"."+p.slice(o))}else p=$?"0p+0":"0";p=(16==e?"0x":2==e?"0b":8==e?"0o":"")+p}else p=W(t);return t.s<0?"-"+p:p}function J(t,e){if(t.length>e)return t.length=e,!0}function Q(t){return new this(t).abs()}function tt(t){return new this(t).acos()}function et(t){return new this(t).acosh()}function nt(t,e){return new this(t).plus(e)}function it(t){return new this(t).asin()}function st(t){return new this(t).asinh()}function rt(t){return new this(t).atan()}function ot(t){return new this(t).atanh()}function lt(t,e){t=new this(t),e=new this(e);var n,i=this.precision,s=this.rounding,r=i+4;return t.s&&e.s?t.d||e.d?!e.d||t.isZero()?(n=e.s<0?U(this,i,s):new this(0)).s=t.s:!t.d||e.isZero()?(n=U(this,r,1).times(.5)).s=t.s:e.s<0?(this.precision=r,this.rounding=1,n=this.atan(D(t,e,r,1)),e=U(this,r,1),this.precision=i,this.rounding=s,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(D(t,e,r,1)):(n=U(this,r,1).times(e.s>0?.25:.75)).s=t.s:n=new this(NaN),n}function at(t){return new this(t).cbrt()}function ct(t){return A(t=new this(t),t.e+1,2)}function ut(t,e,n){return new this(t).clamp(e,n)}function dt(t){if(!t||"object"!=typeof t)throw Error(p+"Object expected");var e,n,i,s=!0===t.defaults,r=["precision",1,l,"rounding",0,8,"toExpNeg",-o,0,"toExpPos",0,o,"maxE",0,o,"minE",-o,0,"modulo",0,9];for(e=0;e<r.length;e+=3)if(n=r[e],s&&(this[n]=d[n]),void 0!==(i=t[n])){if(!(b(i)===i&&i>=r[e+1]&&i<=r[e+2]))throw Error(m+n+": "+i);this[n]=i}if(n="crypto",s&&(this[n]=d[n]),void 0!==(i=t[n])){if(!0!==i&&!1!==i&&0!==i&&1!==i)throw Error(m+n+": "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(g);this[n]=!0}else this[n]=!1}return this}function ft(t){return new this(t).cos()}function pt(t){return new this(t).cosh()}function mt(t,e){return new this(t).div(e)}function ht(t){return new this(t).exp()}function gt(t){return A(t=new this(t),t.e+1,3)}function $t(){var t,e,n=new this(0);for(f=!1,t=0;t<arguments.length;)if((e=new this(arguments[t++])).d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return f=!0,new this(1/0);n=e}return f=!0,n.sqrt()}function bt(t){return t instanceof n||t&&t.toStringTag===$||!1}function vt(t){return new this(t).ln()}function yt(t,e){return new this(t).log(e)}function wt(t){return new this(t).log(2)}function xt(t){return new this(t).log(10)}function Nt(){return z(this,arguments,"lt")}function Et(){return z(this,arguments,"gt")}function _t(t,e){return new this(t).mod(e)}function kt(t,e){return new this(t).mul(e)}function Pt(t,e){return new this(t).pow(e)}function It(t){var e,n,i,s,r=0,o=new this(1),a=[];if(void 0===t?t=this.precision:M(t,1,l),i=Math.ceil(t/7),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));r<i;)(s=e[r])>=429e7?e[r]=crypto.getRandomValues(new Uint32Array(1))[0]:a[r++]=s%1e7;else{if(!crypto.randomBytes)throw Error(g);for(e=crypto.randomBytes(i*=4);r<i;)(s=e[r]+(e[r+1]<<8)+(e[r+2]<<16)+((127&e[r+3])<<24))>=214e7?crypto.randomBytes(4).copy(e,r):(a.push(s%1e7),r+=4);r=i/4}else for(;r<i;)a[r++]=1e7*Math.random()|0;for(t%=7,(i=a[--r])&&t&&(s=v(10,7-t),a[r]=(i/s|0)*s);0===a[r];r--)a.pop();if(r<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=7)a.shift();for(i=1,s=a[0];s>=10;s/=10)i++;i<7&&(n-=7-i)}return o.e=n,o.d=a,o}function Mt(t){return A(t=new this(t),t.e+1,this.rounding)}function St(t){return(t=new this(t)).d?t.d[0]?t.s:0*t.s:t.s||NaN}function Ot(t){return new this(t).sin()}function Dt(t){return new this(t).sinh()}function At(t){return new this(t).sqrt()}function Ct(t,e){return new this(t).sub(e)}function Rt(){var t=0,e=arguments,n=new this(e[t]);for(f=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return f=!0,A(n,this.precision,this.rounding)}function Tt(t){return new this(t).tan()}function Ut(t){return new this(t).tanh()}function qt(t){return A(t=new this(t),t.e+1,1)}n=function t(e){var n,i,s;function r(t){var e,n,i,s=this;if(!(s instanceof r))return new r(t);if(s.constructor=r,bt(t))return s.s=t.s,void(f?!t.d||t.e>r.maxE?(s.e=NaN,s.d=null):t.e<r.minE?(s.e=0,s.d=[0]):(s.e=t.e,s.d=t.d.slice()):(s.e=t.e,s.d=t.d?t.d.slice():t.d));if("number"==(i=typeof t)){if(0===t)return s.s=1/t<0?-1:1,s.e=0,void(s.d=[0]);if(t<0?(t=-t,s.s=-1):s.s=1,t===~~t&&t<1e7){for(e=0,n=t;n>=10;n/=10)e++;return void(f?e>r.maxE?(s.e=NaN,s.d=null):e<r.minE?(s.e=0,s.d=[0]):(s.e=e,s.d=[t]):(s.e=e,s.d=[t]))}return 0*t!=0?(t||(s.s=NaN),s.e=NaN,void(s.d=null)):V(s,t.toString())}if("string"!==i)throw Error(m+t);return 45===(n=t.charCodeAt(0))?(t=t.slice(1),s.s=-1):(43===n&&(t=t.slice(1)),s.s=1),N.test(t)?V(s,t):Z(s,t)}if(r.prototype=P,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=dt,r.clone=t,r.isDecimal=bt,r.abs=Q,r.acos=tt,r.acosh=et,r.add=nt,r.asin=it,r.asinh=st,r.atan=rt,r.atanh=ot,r.atan2=lt,r.cbrt=at,r.ceil=ct,r.clamp=ut,r.cos=ft,r.cosh=pt,r.div=mt,r.exp=ht,r.floor=gt,r.hypot=$t,r.ln=vt,r.log=yt,r.log10=xt,r.log2=wt,r.max=Nt,r.min=Et,r.mod=_t,r.mul=kt,r.pow=Pt,r.random=It,r.round=Mt,r.sign=St,r.sin=Ot,r.sinh=Dt,r.sqrt=At,r.sub=Ct,r.sum=Rt,r.tan=Tt,r.tanh=Ut,r.trunc=qt,void 0===e&&(e={}),e&&!0!==e.defaults)for(s=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<s.length;)e.hasOwnProperty(i=s[n++])||(e[i]=this[i]);return r.config(e),r}(d),n.prototype.constructor=n,n.default=n.Decimal=n,c=new n(c),u=new n(u),t.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(P[Symbol.for("nodejs.util.inspect.custom")]=P.toString,P[Symbol.toStringTag]="Decimal"),t.exports=n):(e||(e="undefined"!=typeof self&&self&&self.self==self?self:window),s=e.Decimal,n.noConflict=function(){return e.Decimal=s,n},e.Decimal=n)}(Tt)},Ut(qt={exports:{}},qt.exports),qt.exports);var Ht,Lt,zt,Bt;const{HTTPMessageBusClient:jt}=null!==(Lt=null===(Ht=window.configs)||void 0===Ht?void 0:Ht.client)&&void 0!==Lt?Lt:{},{GridClient:Wt,DiskModel:Vt,MachineModel:Zt,MachinesModel:Gt,GatewayNameModel:Yt,NetworkModel:Kt,generateString:Xt}=null!==(Bt=null===(zt=window.configs)||void 0===zt?void 0:zt.grid3_client)&&void 0!==Bt?Bt:{};async function Jt(t,e){const{envs:n,disks:[{size:i}],adminUsername:s,adminEmail:r,adminPassword:o,smtpHost:l,smtpPort:a,smtpHostPassword:c,smtpHostUser:u}=t,d=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]])}return n}(t,["envs","disks","adminUsername","adminEmail","adminPassword","smtpHost","smtpPort","smtpHostPassword","smtpHostUser"]);let{name:f,flist:p,cpu:m,memory:h,entrypoint:g,network:$}=d;const{publicIp:b,planetary:v,nodeId:y}=d,{mnemonics:w,storeSecret:x,networkEnv:N,sshKey:E}=e,_=new jt(0,""),k=new Wt(N,w,x,_,void 0,"tfkvstore");await k.connect();let P=Xt(10).toLowerCase(),I=await async function(t,e,n){return`${e}${await t.twins.get_my_twin_id()}${n.toLowerCase()}`}(k,"oc",f),[M,S]=await async function(){const t=new Ct(At.config.graphqlURL,At.config.rmbClient.proxyURL),e=Rt(await t.filterNodes({gateway:!0}));return[e.nodeId,e.publicConfig.domain]}();const O=`${I}.${S}`,D=new Kt;D.name=`net${P}`,D.ip_range="10.1.0.0/16";const A=await async function(t,e,n,i,s,r,o,l,a,c,u,d,f,p,m,h,g,$){const b=new Vt;b.name=`disk${$}`,b.size=a,b.mountpoint="/var/lib/docker";const v=new Zt;v.name=`vm${$}`,v.node_id=s,v.disks=[b],v.public_ip=!1,v.planetary=!0,v.cpu=o,v.memory=l,v.rootfs_size=(y=o,w=l,y=y||0,w=w||0,0===new Ft.Decimal(y).mul(w).divToInt(8192).toNumber()?500/1024:2),v.flist="https://hub.grid.tf/waleedhammam.3bot/waleedhammam-owncloud-latest.flist",v.entrypoint="/sbin/zinit init",v.env={SSH_KEY:f,OWNCLOUD_HOST:r,OWNCLOUD_USERNAME:c,OWNCLOUD_PASSWORD:d,OWNCLOUD_EMAIL:u,OWNCLOUD_SMTP_HOST:p,OWNCLOUD_SMTP_PORT_NUMBER:`${m}`,OWNCLOUD_SMTP_USER:h,OWNCLOUD_SMTP_PASSWORD:g};var y,w;const x=new Gt;return x.name=n,x.network=i,x.machines=[v],St(t,"Owncloud",n,(t=>t.machines.deploy(x).then((()=>t.machines.getObj(n))).then((([t])=>t))))}(e,0,f,D,y,O,m,h,i,s,r,o,E,l,a,u,c,P),C=await async function(t,e){return await t.machines.getObj(e)}(k,f),R=C[0].planetary;try{await async function(t,e,n,i,s){const r=new Yt;return r.name=n,r.node_id=s,r.tls_passthrough=!1,r.backends=[`http://[${i}]:80`],St(t,"GatewayName",n,(t=>t.gateway.deploy_name(r).then((()=>t.gateway.getObj(n))).then((([t])=>t))))}(e,0,I,R,M)}catch(t){throw await k.machines.delete({name:f}),t}const T=await async function(t,e){return await t.gateway.getObj(e)}(k,I);return T[0].domain,{deployment:A,domain:O,planetaryIP:R}}function Qt(e){return{c(){this.c=t},m:t,p:t,i:t,o:t,d:t}}function te(t){var e;const n=null===(e=window.configs)||void 0===e?void 0:e.baseConfig,i=I();let s;return P((()=>{s=n.subscribe((()=>{i("profile",n.getActiveProfile())}))})),function(t){k().$$.on_destroy.push(t)}((()=>{s()})),[]}class ee extends j{constructor(t){super(),it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},te,Qt,r,{},null),t&&t.target&&a(t.target,this,t.anchor)}}function ne(t,e,n){const i=t.slice();return i[24]=e[n],i}function ie(t){let e,n,i;function s(t,e){return null==n&&(n=!!t[8]()),n?oe:"checkbox"===t[1].type?re:"select"===t[1].type?se:void 0}let r=s(t),o=r&&r(t),d=t[1].tooltip&&he(t);return{c(){e=u("div"),o&&o.c(),i=f(),d&&d.c(),$(e,"class","tooltip mb-2")},m(t,n){a(t,e,n),o&&o.m(e,null),l(e,i),d&&d.m(e,null)},p(t,n){r===(r=s(t))&&o?o.p(t,n):(o&&o.d(1),o=r&&r(t),o&&(o.c(),o.m(e,i))),t[1].tooltip?d?d.p(t,n):(d=he(t),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(t){t&&c(e),o&&o.d(),d&&d.d()}}}function se(t){let e,n,s,r,o,d,p,h,g=[],b=new Map,v=t[1].label&&le(t),y=t[1].options;const N=t=>t[24].value;for(let e=0;e<y.length;e+=1){let n=ne(t,y,e),i=N(n);b.set(i,g[e]=ae(i,n))}let E=(t[1].error||t[4])&&ce(t);return{c(){v&&v.c(),e=f(),n=u("div"),s=u("select");for(let t=0;t<g.length;t+=1)g[t].c();o=f(),E&&E.c(),s.disabled=r=t[1].disabled,w(s,"width","100%"),void 0===t[0]&&T((()=>t[22].call(s))),$(n,"class",d="select mb-2"+(t[1].error||t[4]?" is-danger":"")),w(n,"width","100%"),$(n,"id",t[7])},m(i,r){v&&v.m(i,r),a(i,e,r),a(i,n,r),l(n,s);for(let t=0;t<g.length;t+=1)g[t].m(s,null);x(s,t[0]),l(n,o),E&&E.m(n,null),p||(h=[m(s,"change",t[22]),m(s,"change",t[9])],p=!0)},p(t,i){t[1].label?v?v.p(t,i):(v=le(t),v.c(),v.m(e.parentNode,e)):v&&(v.d(1),v=null),2&i&&(y=t[1].options,g=X(g,i,N,1,t,y,b,s,Y,ae,null,ne)),2&i&&r!==(r=t[1].disabled)&&(s.disabled=r),3&i&&x(s,t[0]),t[1].error||t[4]?E?E.p(t,i):(E=ce(t),E.c(),E.m(n,null)):E&&(E.d(1),E=null),18&i&&d!==(d="select mb-2"+(t[1].error||t[4]?" is-danger":""))&&$(n,"class",d)},d(t){v&&v.d(t),t&&c(e),t&&c(n);for(let t=0;t<g.length;t+=1)g[t].d();E&&E.d(),p=!1,i(h)}}}function re(t){let e,n,s,r,o,p,h,g,b,y,x,N=t[1].label+"";return{c(){e=u("div"),n=u("label"),s=u("input"),o=f(),p=u("span"),h=f(),g=u("label"),b=d(N),$(s,"class","switch__input"),$(s,"type","checkbox"),$(s,"id",t[7]),s.disabled=r=t[1].disabled,$(p,"class","slider"),$(n,"class","switch"),$(g,"for",t[7]),$(g,"class","label ml-2"),w(g,"cursor","pointer"),w(e,"display","flex"),w(e,"align-items","center"),$(e,"class","mb-2")},m(i,r){a(i,e,r),l(e,n),l(n,s),s.checked=t[0],l(n,o),l(n,p),l(e,h),l(e,g),l(g,b),y||(x=[m(s,"change",t[21]),m(s,"input",t[14])],y=!0)},p(t,e){2&e&&r!==(r=t[1].disabled)&&(s.disabled=r),3&e&&(s.checked=t[0]),2&e&&N!==(N=t[1].label+"")&&v(b,N)},d(t){t&&c(e),y=!1,i(x)}}}function oe(t){let e,n,i,s,r,o,p,m=t[1].label+"";function h(t,e){return"textarea"===t[1].type?pe:"text"===t[1].type?fe:"number"===t[1].type?de:"password"===t[1].type?ue:void 0}let g=h(t),b=g&&g(t),y=(t[1].error||t[4])&&me(t);return{c(){e=u("div"),n=u("p"),i=d(m),s=f(),r=u("div"),b&&b.c(),p=f(),y&&y.c(),$(n,"class","label"),$(r,"class",o="control"+("password"===t[1].type?" has-icons-right":"")+(t[1].loading?" is-loading":"")),$(e,"class","field"),$(e,"id",t[7])},m(t,o){a(t,e,o),l(e,n),l(n,i),l(e,s),l(e,r),b&&b.m(r,null),l(e,p),y&&y.m(e,null)},p(t,n){2&n&&m!==(m=t[1].label+"")&&v(i,m),g===(g=h(t))&&b?b.p(t,n):(b&&b.d(1),b=g&&g(t),b&&(b.c(),b.m(r,null))),2&n&&o!==(o="control"+("password"===t[1].type?" has-icons-right":"")+(t[1].loading?" is-loading":""))&&$(r,"class",o),t[1].error||t[4]?y?y.p(t,n):(y=me(t),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(t){t&&c(e),b&&b.d(),y&&y.d()}}}function le(t){let e,n,i=t[1].label+"";return{c(){e=u("p"),n=d(i),$(e,"class","label")},m(t,i){a(t,e,i),l(e,n)},p(t,e){2&e&&i!==(i=t[1].label+"")&&v(n,i)},d(t){t&&c(e)}}}function ae(t,e){let n,i,s,r,o,p,m=e[24].label+"";return{key:t,first:null,c(){n=u("option"),i=d(m),s=f(),n.__value=r=e[24].value,n.value=n.__value,n.selected=o=e[24].selected,n.disabled=p=e[24].disabled,this.first=n},m(t,e){a(t,n,e),l(n,i),l(n,s)},p(t,s){e=t,2&s&&m!==(m=e[24].label+"")&&v(i,m),2&s&&r!==(r=e[24].value)&&(n.__value=r,n.value=n.__value),2&s&&o!==(o=e[24].selected)&&(n.selected=o),2&s&&p!==(p=e[24].disabled)&&(n.disabled=p)},d(t){t&&c(n)}}}function ce(t){let e,n,i=(t[1].error||t[4])+"";return{c(){e=u("p"),n=d(i),$(e,"class","help is-danger")},m(t,i){a(t,e,i),l(e,n)},p(t,e){18&e&&i!==(i=(t[1].error||t[4])+"")&&v(n,i)},d(t){t&&c(e)}}}function ue(t){let e,n,s,r,o,d,p,h,g,b;return{c(){e=u("input"),o=f(),d=u("span"),p=u("i"),$(e,"type","password"),$(e,"class",n="input"+(t[1].error||t[4]?" is-danger":"")),$(e,"placeholder",s=t[1].placeholder),e.disabled=r=t[1].disabled,$(p,"class",h="fas "+(t[5]?"fa-eye":"far fa-eye-slash")),w(d,"position","absolute"),w(d,"top","50%"),w(d,"right","15px"),w(d,"transform","translateY(-50%)"),w(d,"cursor","pointer")},m(n,i){a(n,e,i),y(e,t[0]),t[19](e),a(n,o,i),a(n,d,i),l(d,p),g||(b=[m(e,"input",t[18]),m(e,"input",t[10]),m(d,"click",t[20])],g=!0)},p(t,i){18&i&&n!==(n="input"+(t[1].error||t[4]?" is-danger":""))&&$(e,"class",n),2&i&&s!==(s=t[1].placeholder)&&$(e,"placeholder",s),2&i&&r!==(r=t[1].disabled)&&(e.disabled=r),3&i&&e.value!==t[0]&&y(e,t[0]),32&i&&h!==(h="fas "+(t[5]?"fa-eye":"far fa-eye-slash"))&&$(p,"class",h)},d(n){n&&c(e),t[19](null),n&&c(o),n&&c(d),g=!1,i(b)}}}function de(t){let e,n,s,r,o,l;return{c(){e=u("input"),$(e,"type","number"),$(e,"class",n="input"+(t[1].error||t[4]?" is-danger":"")),$(e,"placeholder",s=t[1].placeholder),e.disabled=r=t[1].disabled,$(e,"min",t[2]),$(e,"max",t[3])},m(n,i){a(n,e,i),y(e,t[0]),o||(l=[m(e,"input",t[17]),m(e,"input",t[10])],o=!0)},p(t,i){18&i&&n!==(n="input"+(t[1].error||t[4]?" is-danger":""))&&$(e,"class",n),2&i&&s!==(s=t[1].placeholder)&&$(e,"placeholder",s),2&i&&r!==(r=t[1].disabled)&&(e.disabled=r),4&i&&$(e,"min",t[2]),8&i&&$(e,"max",t[3]),3&i&&b(e.value)!==t[0]&&y(e,t[0])},d(t){t&&c(e),o=!1,i(l)}}}function fe(t){let e,n,s,r,o,l;return{c(){e=u("input"),$(e,"type","text"),$(e,"class",n="input"+(t[1].error||t[4]?" is-danger":"")),$(e,"placeholder",s=t[1].placeholder),e.disabled=r=t[1].disabled},m(n,i){a(n,e,i),y(e,t[0]),o||(l=[m(e,"input",t[16]),m(e,"input",t[10])],o=!0)},p(t,i){18&i&&n!==(n="input"+(t[1].error||t[4]?" is-danger":""))&&$(e,"class",n),2&i&&s!==(s=t[1].placeholder)&&$(e,"placeholder",s),2&i&&r!==(r=t[1].disabled)&&(e.disabled=r),3&i&&e.value!==t[0]&&y(e,t[0])},d(t){t&&c(e),o=!1,i(l)}}}function pe(t){let e,n,s,r,o,l;return{c(){e=u("textarea"),$(e,"class",n="textarea"+(t[1].error||t[4]?" is-danger":"")),$(e,"placeholder",s=t[1].placeholder),e.disabled=r=t[1].disabled},m(n,i){a(n,e,i),y(e,t[0]),o||(l=[m(e,"input",t[15]),m(e,"input",t[10])],o=!0)},p(t,i){18&i&&n!==(n="textarea"+(t[1].error||t[4]?" is-danger":""))&&$(e,"class",n),2&i&&s!==(s=t[1].placeholder)&&$(e,"placeholder",s),2&i&&r!==(r=t[1].disabled)&&(e.disabled=r),3&i&&y(e,t[0])},d(t){t&&c(e),o=!1,i(l)}}}function me(t){let e,n,i=(t[1].error||t[4])+"";return{c(){e=u("p"),n=d(i),$(e,"class","help is-danger")},m(t,i){a(t,e,i),l(e,n)},p(t,e){18&e&&i!==(i=(t[1].error||t[4])+"")&&v(n,i)},d(t){t&&c(e)}}}function he(t){let e,n,i=t[1].tooltip+"";return{c(){e=u("span"),n=d(i),$(e,"class","tooltip__text")},m(t,i){a(t,e,i),l(e,n)},p(t,e){2&e&&i!==(i=t[1].tooltip+"")&&v(n,i)},d(t){t&&c(e)}}}function ge(e){let n,i,s,r=e[1]&&ie(e);return{c(){n=u("div"),i=f(),r&&r.c(),s=p(),this.c=t},m(t,o){a(t,n,o),n.innerHTML=e[11],a(t,i,o),r&&r.m(t,o),a(t,s,o)},p(t,[e]){t[1]?r?r.p(t,e):(r=ie(t),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i:t,o:t,d(t){t&&c(n),t&&c(i),r&&r.d(t),t&&c(s)}}}function $e(t,e,n){const i=I();let{field:s}=e,{data:r}=e,{selected:o=0}=e,{invalid:l=!1}=e,{min:a}=e,{max:c}=e;const u=dt();let d;let f,p=!1;return t.$$set=t=>{"field"in t&&n(1,s=t.field),"data"in t&&n(0,r=t.data),"selected"in t&&n(12,o=t.selected),"invalid"in t&&n(13,l=t.invalid),"min"in t&&n(2,a=t.min),"max"in t&&n(3,c=t.max)},[r,s,a,c,d,p,f,u,()=>["text","number","password","textarea"].includes(s.type),function(t){i("input",t);const e=t.target;n(12,o=e.selectedIndex)},function(t){const e=t.target;if(s.validator){let t=s.validator(e.value);n(4,d="string"==typeof t?t:void 0),n(13,l=!!t)}else if("number"===e.type){let t=+e.value<=0?"Value must be positive":null;n(4,d="string"==typeof t?t:void 0),n(13,l=!!t)}i("input",t)},'\n<style>\n  @import url("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css");\n\n  .switch {\n    position: relative;\n    display: inline-block;\n    width: 60px;\n    height: 34px;\n  }\n\n  .switch .switch__input {\n    opacity: 0;\n    width: 0;\n    height: 0;\n  }\n\n  .slider {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ccc;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    border-radius: 34px;\n  }\n\n  .slider:before {\n    position: absolute;\n    content: "";\n    height: 26px;\n    width: 26px;\n    left: 4px;\n    bottom: 4px;\n    background-color: white;\n    -webkit-transition: 0.4s;\n    transition: 0.4s;\n    border-radius: 50%;\n  }\n\n  .switch__input:checked + .slider {\n    background-color: #2196f3;\n  }\n\n  .switch__input:checked + .slider {\n    box-shadow: 0 0 1px #2196f3;\n  }\n\n  .switch__input:checked + .slider:before {\n    -webkit-transform: translateX(26px);\n    -ms-transform: translateX(26px);\n    transform: translateX(26px);\n  }\n\n  .tooltip {\n    position: relative;\n  }\n\n  .tooltip__text {\n    position: absolute;\n    top: -20px;\n    left: 50%;\n    padding: 10px 15px;\n    border-radius: 5px;\n    background-color: rgba(51, 51, 51, 0.9);\n    color: white;\n    z-index: 9;\n    max-width: min(1000px, calc(100% - 30px));\n    display: block;\n\n    transition-property: opacity, transform, visibility;\n    transition-timing-function: ease;\n    transition-duration: 300ms;\n    pointer-events: none;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateX(-50%) translateY(20px) scale(0);\n  }\n\n  .tooltip:hover > .tooltip__text {\n    pointer-events: all;\n    opacity: 1;\n    visibility: visible;\n    transform: translateX(-50%) translateY(0) scale(1);\n  }\n\n  [disabled] { cursor: inherit !important; }\n</style>\n',o,l,function(e){M.call(this,t,e)},function(){r=this.value,n(0,r),n(1,s)},function(){r=this.value,n(0,r),n(1,s)},function(){r=b(this.value),n(0,r),n(1,s)},function(){r=this.value,n(0,r),n(1,s)},function(t){O[t?"unshift":"push"]((()=>{f=t,n(6,f)}))},()=>{n(5,p=!p),n(6,f.type=p?"text":"password",f)},function(){r=this.checked,n(0,r),n(1,s)},function(){r=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(0,r),n(1,s)}]}customElements.define("tf-select-profile",ee);class be extends j{constructor(t){super(),it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},$e,ge,r,{field:1,data:0,selected:12,invalid:13,min:2,max:3},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["field","data","selected","invalid","min","max"]}get field(){return this.$$.ctx[1]}set field(t){this.$$set({field:t}),H()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),H()}get selected(){return this.$$.ctx[12]}set selected(t){this.$$set({selected:t}),H()}get invalid(){return this.$$.ctx[13]}set invalid(t){this.$$set({invalid:t}),H()}get min(){return this.$$.ctx[2]}set min(t){this.$$set({min:t}),H()}get max(){return this.$$.ctx[3]}set max(t){this.$$set({max:t}),H()}}function ve(t,e,n){const i=t.slice();return i[7]=e[n],i[9]=n,i}function ye(t){let e,n=[],i=new Map,s=t[1];const r=t=>t[7].label;for(let e=0;e<s.length;e+=1){let o=ve(t,s,e),l=r(o);i.set(l,n[e]=xe(l,o))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=p()},m(t,i){for(let e=0;e<n.length;e+=1)n[e].m(t,i);a(t,e,i)},p(t,o){51&o&&(s=t[1],n=X(n,o,r,1,t,s,i,e.parentNode,Y,xe,e,ve))},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&c(e)}}}function we(t){let e,n,i;return{c(){e=u("button"),$(e,"class","ml-2 is-small delete")},m(r,o){a(r,e,o),n||(i=m(e,"click",g(h((function(){s(t[4](t[9]))&&t[4](t[9]).apply(this,arguments)})))),n=!0)},p(e,n){t=e},d(t){t&&c(e),n=!1,i()}}}function xe(t,e){let n,i,r,o,p,g,b,y,w,x=e[7].label+"",N=e[7].removable&&we(e);return{key:t,first:null,c(){n=u("li"),i=u("a"),r=u("span"),o=d(x),p=f(),N&&N.c(),g=f(),$(i,"href","#!"),$(n,"class",b=e[0]===e[7].value?"is-active":""),this.first=n},m(t,c){a(t,n,c),l(n,i),l(i,r),l(r,o),l(i,p),N&&N.m(i,null),l(n,g),y||(w=m(i,"click",h((function(){s(e[5].bind(void 0,e[7].value))&&e[5].bind(void 0,e[7].value).apply(this,arguments)}))),y=!0)},p(t,s){e=t,2&s&&x!==(x=e[7].label+"")&&v(o,x),e[7].removable?N?N.p(e,s):(N=we(e),N.c(),N.m(i,null)):N&&(N.d(1),N=null),3&s&&b!==(b=e[0]===e[7].value?"is-active":"")&&$(n,"class",b)},d(t){t&&c(n),N&&N.d(),y=!1,w()}}}function Ne(e){let n,i,s,r,o=e[1]&&ye(e);return{c(){n=u("div"),i=u("ul"),o&&o.c(),this.c=t,$(i,"style",s=e[3]?"pointer-events: none; cursor: default;":""),$(n,"class",r="tabs "+(e[2]?"is-centered":""))},m(t,e){a(t,n,e),l(n,i),o&&o.m(i,null)},p(t,[e]){t[1]?o?o.p(t,e):(o=ye(t),o.c(),o.m(i,null)):o&&(o.d(1),o=null),8&e&&s!==(s=t[3]?"pointer-events: none; cursor: default;":"")&&$(i,"style",s),4&e&&r!==(r="tabs "+(t[2]?"is-centered":""))&&$(n,"class",r)},i:t,o:t,d(t){t&&c(n),o&&o.d()}}}function Ee(t,e,n){const i=I();let{tabs:s}=e,{active:r}=e,{centered:o=!0}=e,{disabled:l=!1}=e;return P((()=>{i("init")})),t.$$set=t=>{"tabs"in t&&n(1,s=t.tabs),"active"in t&&n(0,r=t.active),"centered"in t&&n(2,o=t.centered),"disabled"in t&&n(3,l=t.disabled)},[r,s,o,l,t=>()=>i("removed",t),function(t){r!==t&&(n(0,r=t),i("select",t))}]}customElements.define("tf-input",be);class _e extends j{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},Ee,Ne,r,{tabs:1,active:0,centered:2,disabled:3},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["tabs","active","centered","disabled"]}get tabs(){return this.$$.ctx[1]}set tabs(t){this.$$set({tabs:t}),H()}get active(){return this.$$.ctx[0]}set active(t){this.$$set({active:t}),H()}get centered(){return this.$$.ctx[2]}set centered(t){this.$$set({centered:t}),H()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),H()}}var ke,Pe;customElements.define("tf-tabs",_e);const{GridClient:Ie,Nodes:Me}=null!==(Pe=null===(ke=window.configs)||void 0===ke?void 0:ke.grid3_client)&&void 0!==Pe?Pe:{};var Se,Oe;const{GridClient:De}=null!==(Oe=null===(Se=window.configs)||void 0===Se?void 0:Se.grid3_client)&&void 0!==Oe?Oe:{};function Ae(t,e,n={}){const{networkEnv:i}=t,s=new De("","","",null),{graphql:r}=s.getDefaultUrls(i);return fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:n})}).then((t=>t.json())).then((({data:t})=>t))}function Ce(t,e,n){const i=t.slice();return i[37]=e[n],i}function Re(t){let e,n,i,s,r,o;function l(e){t[29](e)}let u={field:t[13]};void 0!==t[0]&&(u.data=t[0]),e=new be({props:u}),O.push((()=>J(e,"data",l)));let d=t[9]&&t[0]&&Ue(t),m=!t[9]&&t[0]&&qe(t);return{c(){Q(e.$$.fragment),i=f(),d&&d.c(),s=f(),m&&m.c(),r=p()},m(t,n){tt(e,t,n),a(t,i,n),d&&d.m(t,n),a(t,s,n),m&&m.m(t,n),a(t,r,n),o=!0},p(t,i){const o={};!n&&1&i[0]&&(n=!0,o.data=t[0],U((()=>n=!1))),e.$set(o),t[9]&&t[0]?d?d.p(t,i):(d=Ue(t),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null),!t[9]&&t[0]?m?m.p(t,i):(m=qe(t),m.c(),m.m(r.parentNode,r)):m&&(m.d(1),m=null)},i(t){o||(Z(e.$$.fragment,t),o=!0)},o(t){G(e.$$.fragment,t),o=!1},d(t){et(e,t),t&&c(i),d&&d.d(t),t&&c(s),m&&m.d(t),t&&c(r)}}}function Te(t){let e,n,i,s,r,o,p,h,g,b,v,y,w,x=[],N=new Map,E=t[8];const _=t=>t[37].symbol;for(let e=0;e<E.length;e+=1){let n=Ce(t,E,e),i=_(n);N.set(i,x[e]=Le(i,n))}function k(e){t[27](e)}let P={field:{label:`Node ID (Found ${t[6].options.length-1})`,type:"select",symbol:"nodeId",options:t[6].options}};return void 0!==t[0]&&(P.data=t[0]),g=new be({props:P}),O.push((()=>J(g,"data",k))),g.$on("input",t[28]),{c(){e=u("h5"),e.textContent="Nodes Filter",n=f();for(let t=0;t<x.length;t+=1)x[t].c();i=f(),s=u("button"),r=d("Apply Filters and Suggest Nodes"),h=f(),Q(g.$$.fragment),$(e,"class","is-size-5 has-text-weight-bold"),$(s,"class",o="button is-primary mt-2 mb-2 "+(t[7]?"is-loading":"")),s.disabled=p=t[7]||!t[4],$(s,"type","button")},m(o,c){a(o,e,c),a(o,n,c);for(let t=0;t<x.length;t+=1)x[t].m(o,c);a(o,i,c),a(o,s,c),l(s,r),a(o,h,c),tt(g,o,c),v=!0,y||(w=m(s,"click",t[11]),y=!0)},p(t,e){4384&e[0]&&(E=t[8],W(),x=X(x,e,_,1,t,E,N,i.parentNode,K,Le,i,Ce),V()),(!v||128&e[0]&&o!==(o="button is-primary mt-2 mb-2 "+(t[7]?"is-loading":"")))&&$(s,"class",o),(!v||144&e[0]&&p!==(p=t[7]||!t[4]))&&(s.disabled=p);const n={};64&e[0]&&(n.field={label:`Node ID (Found ${t[6].options.length-1})`,type:"select",symbol:"nodeId",options:t[6].options}),!b&&1&e[0]&&(b=!0,n.data=t[0],U((()=>b=!1))),g.$set(n)},i(t){if(!v){for(let t=0;t<E.length;t+=1)Z(x[t]);Z(g.$$.fragment,t),v=!0}},o(t){for(let t=0;t<x.length;t+=1)G(x[t]);G(g.$$.fragment,t),v=!1},d(t){t&&c(e),t&&c(n);for(let e=0;e<x.length;e+=1)x[e].d(t);t&&c(i),t&&c(s),t&&c(h),et(g,t),y=!1,w()}}}function Ue(t){let e,n,i;return{c(){e=u("p"),n=d("Validating node "),i=d(t[0]),$(e,"class","help is-success")},m(t,s){a(t,e,s),l(e,n),l(e,i)},p(t,e){1&e[0]&&v(i,t[0])},d(t){t&&c(e)}}}function qe(t){let e;function n(t,e){return"valid"==t[3]?He:"invalid"===t[3]?Fe:void 0}let i=n(t),s=i&&i(t);return{c(){s&&s.c(),e=p()},m(t,n){s&&s.m(t,n),a(t,e,n)},p(t,r){i===(i=n(t))&&s?s.p(t,r):(s&&s.d(1),s=i&&i(t),s&&(s.c(),s.m(e.parentNode,e)))},d(t){s&&s.d(t),t&&c(e)}}}function Fe(t){let e,n,i,s,r;return{c(){e=u("p"),n=d("Node("),i=u("strong"),s=d(t[0]),r=d(") might be down or doesn't have enough\n        resources."),$(e,"class","help is-danger")},m(t,o){a(t,e,o),l(e,n),l(e,i),l(i,s),l(e,r)},p(t,e){1&e[0]&&v(s,t[0])},d(t){t&&c(e)}}}function He(t){let e,n,i,s,r;return{c(){e=u("p"),n=d("Node("),i=u("strong"),s=d(t[0]),r=d(") is up and has enough resources."),$(e,"class","help is-success")},m(t,o){a(t,e,o),l(e,n),l(e,i),l(i,s),l(e,r)},p(t,e){1&e[0]&&v(s,t[0])},d(t){t&&c(e)}}}function Le(t,e){let n,i,r;return i=new be({props:{data:e[5][e[37].symbol],field:e[37]}}),i.$on("input",(function(){s(e[12](e[37].symbol))&&e[12](e[37].symbol).apply(this,arguments)})),{key:t,first:null,c(){n=p(),Q(i.$$.fragment),this.first=n},m(t,e){a(t,n,e),tt(i,t,e),r=!0},p(t,n){e=t;const s={};288&n[0]&&(s.data=e[5][e[37].symbol]),256&n[0]&&(s.field=e[37]),i.$set(s)},i(t){r||(Z(i.$$.fragment,t),r=!0)},o(t){G(i.$$.fragment,t),r=!1},d(t){t&&c(n),et(i,t)}}}function ze(e){let n,i,s,r,o,l,u;function d(t){e[25](t)}let m={field:e[10]};void 0!==e[2]&&(m.data=e[2]),n=new be({props:m}),O.push((()=>J(n,"data",d))),n.$on("input",e[26]);const h=[Te,Re],g=[];function $(t,e){return"automatic"===t[2]?0:"manual"===t[2]?1:-1}return~(r=$(e))&&(o=g[r]=h[r](e)),{c(){Q(n.$$.fragment),s=f(),o&&o.c(),l=p(),this.c=t},m(t,e){tt(n,t,e),a(t,s,e),~r&&g[r].m(t,e),a(t,l,e),u=!0},p(t,e){const s={};!i&&4&e[0]&&(i=!0,s.data=t[2],U((()=>i=!1))),n.$set(s);let a=r;r=$(t),r===a?~r&&g[r].p(t,e):(o&&(W(),G(g[a],1,1,(()=>{g[a]=null})),V()),~r?(o=g[r],o?o.p(t,e):(o=g[r]=h[r](t),o.c()),Z(o,1),o.m(l.parentNode,l)):o=null)},i(t){u||(Z(n.$$.fragment,t),Z(o),u=!0)},o(t){G(n.$$.fragment,t),G(o),u=!1},d(t){et(n,t),t&&c(s),~r&&g[r].d(t),t&&c(l)}}}function Be(t){return"number"!=typeof(t=+t)?"Please select a node.":t<1?"Please select a valid node":void 0}function je(t,e,n){var i,s;const{GridClient:r}=null!==(s=null===(i=window.configs)||void 0===i?void 0:i.grid3_client)&&void 0!==s?s:{},o=I();let{cpu:l}=e,{memory:a}=e,{ssd:c}=e,{publicIp:u}=e,{data:d}=e,{status:f}=e,{nodes:p=[]}=e,{profile:m}=e,h=!1;const g=[{label:"Farm Name",symbol:"farmName",type:"select",placeholder:"Enter Farm Name",options:[{label:"Please select a farm",value:null,selected:!0}]},{label:"Country",symbol:"country",type:"select",placeholder:"Enter Country Name",options:[{label:"Please select a country",value:null,selected:!0}]}],$={options:[{label:"Please select a node id.",value:null,selected:!0,disabled:!0}]};let b,{nodeSelection:v}=e,{filters:y}=e;function w(){n(7,h=!0),n(3,f=null);const t=$.options[0].label;n(6,$.options[0].label="Loading...",$);(function(t,e){return new Promise((async n=>{const{networkEnv:i}=e,s=new Ie("","","",null),{graphql:r,rmbProxy:o}=s.getDefaultUrls(i),l=new Me(r,o);try{n((await l.filterNodes(t)).map((t=>({label:`NodeID(${t.nodeId})`,value:t.nodeId}))))}catch(t){console.log("Error findNodes",t),n([])}}))})({publicIPs:y.publicIPs,country:y.country,farmName:y.farmName,cru:y.cru,mru:y.mru,sru:y.sru},m).then((e=>{o("fetch",e),e.length<=0?(n(0,d=null),n(3,f=null),n(6,$.options[0].label="No nodes available",$)):(n(6,$.options[0].label=t,$),n(1,p=e),n(0,d=+e[0].value),n(3,f="valid"))})).catch((t=>{console.log("Error",t),n(0,d=null),n(3,f=null),n(6,$.options[0].label="No nodes available",$)})).finally((()=>{n(7,h=!1)}))}function x(t,e="Loading..."){const i=g[t].options[0].label;return n(8,g[t].options[0].label=e,g),i}function N(t,e){const[i]=g[t].options;n(8,g[t].options=e.reduce(((t,{name:e,code:n})=>{const i={label:e,value:n||e};return t.push(i),t}),[i]),g)}const E={label:"Node ID",symbol:"nodeId",type:"number",placeholder:"Your Node ID",validator:Be};let _,k,P=!1,M=l,S=a,O=c,D=u;return t.$$set=t=>{"cpu"in t&&n(14,l=t.cpu),"memory"in t&&n(15,a=t.memory),"ssd"in t&&n(16,c=t.ssd),"publicIp"in t&&n(17,u=t.publicIp),"data"in t&&n(0,d=t.data),"status"in t&&n(3,f=t.status),"nodes"in t&&n(1,p=t.nodes),"profile"in t&&n(4,m=t.profile),"nodeSelection"in t&&n(2,v=t.nodeSelection),"filters"in t&&n(5,y=t.filters)},t.$$.update=()=>{if(245792&t.$$.dirty[0]&&y&&(l&&y.update("cru",l),a&&y.update("mru",Math.round(a/1024)),c&&y.update("sru",c),y.update("publicIPs",u)),66&t.$$.dirty[0]){const[t]=$.options;n(6,$.options=[t,...p],$)}if(262164&t.$$.dirty[0]&&"automatic"===v&&m&&m.networkEnv!==b){n(18,b=m.networkEnv);const t=x(0),e=x(1);(function(t){return Ae(t,"\nquery GetLimits {\n    farms: farmsConnection { farms_limit: totalCount }\n    countries: countriesConnection { countries_limit: totalCount }\n}\n").then((({farms:{farms_limit:t},countries:{countries_limit:e}})=>({farms_limit:t,countries_limit:e}))).then((e=>Ae(t,"\nquery GetData($farms_limit: Int!, $countries_limit: Int!) {\n    farms(limit: $farms_limit) { name }\n    countries(limit: $countries_limit) { name code }\n}\n",e)))})(m).then((({farms:t,countries:e})=>{t.sort(((t,e)=>t.name.localeCompare(e.name))),N(0,t),N(1,e)})).catch((t=>{console.log("Error",t)})).finally((()=>{x(0,t),x(1,e)}))}if(1572917&t.$$.dirty[0]&&"manual"===v&&m&&k!==d)if(!d||Be(d))_&&(_.abort(),n(19,_=null)),n(9,P=!1),n(3,f=null);else{n(20,k=d),_&&_.abort(),n(19,_=new AbortController);const{networkEnv:t}=m,e=new r("","","",null),{rmbProxy:i}=e.getDefaultUrls(t);n(9,P=!0),n(3,f=null),fetch(`${i}/nodes/${d}`,{method:"GET",signal:_.signal}).then((t=>t.json())).then((({capacity:t})=>{const{total:e,used:i}=t;if(e.cru-i.cru>=y.cru&&(e.sru-i.sru)/1024**3>=y.sru&&(e.mru-i.mru)/1024**3>=y.mru)return y.publicIPs?Ae(m,"query getFarmId($id: Int!) { nodes(where: { nodeId_eq: $id }) { id: farmId }}",{id:d}).then((({nodes:[{id:t}]})=>Ae(m,"query getIps($id: Int!) { publicIps(where: { contractId_eq: 0, farm: {farmId_eq: $id}}) {id}}",{id:t}))).then((({publicIps:t})=>{n(3,f=t.length>0?"valid":"invalid")})):void n(3,f="valid");n(3,f="invalid")})).catch((t=>{console.log("Error",t),t.message.includes("aborted a request")||n(3,f="invalid")})).finally((()=>{n(9,P=!1)}))}if(31703040&t.$$.dirty[0]){let t=!0;M!==l?n(21,M=l):S!==a?n(22,S=a):O!==c?n(23,O=c):D!==u?n(24,D=u):t=!1,t&&requestAnimationFrame((()=>{n(20,k=null),"automatic"===v&&(n(0,d=null),w())}))}},[d,p,v,f,m,y,$,h,g,P,{label:"Node Selection",type:"select",symbol:"value",options:[{label:"Choose a way to select node",value:null,selected:!0,disabled:!0},{label:"Capacity Filter",value:"automatic"},{label:"Manual",value:"manual"}]},w,function(t){return e=>{const n=e.detail.target;y.update(t,n.value)}},E,l,a,c,u,b,_,k,M,S,O,D,function(t){v=t,n(2,v)},()=>{if("manual"===v)return n(3,f=null);null!==d&&p.length>0&&n(3,f="valid")},function(t){d=t,n(0,d)},()=>n(3,f="valid"),function(t){d=t,n(0,d)}]}class We extends j{constructor(t){super(),it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},je,ze,r,{cpu:14,memory:15,ssd:16,publicIp:17,data:0,status:3,nodes:1,profile:4,nodeSelection:2,filters:5},null,[-1,-1]),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["cpu","memory","ssd","publicIp","data","status","nodes","profile","nodeSelection","filters"]}get cpu(){return this.$$.ctx[14]}set cpu(t){this.$$set({cpu:t}),H()}get memory(){return this.$$.ctx[15]}set memory(t){this.$$set({memory:t}),H()}get ssd(){return this.$$.ctx[16]}set ssd(t){this.$$set({ssd:t}),H()}get publicIp(){return this.$$.ctx[17]}set publicIp(t){this.$$set({publicIp:t}),H()}get data(){return this.$$.ctx[0]}set data(t){this.$$set({data:t}),H()}get status(){return this.$$.ctx[3]}set status(t){this.$$set({status:t}),H()}get nodes(){return this.$$.ctx[1]}set nodes(t){this.$$set({nodes:t}),H()}get profile(){return this.$$.ctx[4]}set profile(t){this.$$set({profile:t}),H()}get nodeSelection(){return this.$$.ctx[2]}set nodeSelection(t){this.$$set({nodeSelection:t}),H()}get filters(){return this.$$.ctx[5]}set filters(t){this.$$set({filters:t}),H()}}function Ve(t){let e,n,i,s,r,o,f,p,m,h=t[5].type+"",g=t[5].name+"";return{c(){e=u("div"),n=u("strong"),n.textContent="Warning!",i=d(" Another deployment of type\n        "),s=u("strong"),r=d(h),o=d("\n        with name "),f=u("strong"),p=d(g),m=d(" is in-progress."),$(e,"class","notification is-warning")},m(t,c){a(t,e,c),l(e,n),l(e,i),l(e,s),l(s,r),l(e,o),l(e,f),l(f,p),l(e,m)},p(t,e){32&e&&h!==(h=t[5].type+"")&&v(r,h),32&e&&g!==(g=t[5].name+"")&&v(p,g)},d(t){t&&c(e)}}}function Ze(e){let n;return{c(){n=u("div"),n.innerHTML="<strong>Warning!</strong> Make sure to not leave the page if there is an\n        in-progress deployment or deletion.",$(n,"class","notification is-warning")},m(t,e){a(t,n,e)},p:t,d(t){t&&c(n)}}}function Ge(t){let e;return{c(){e=d(t[4])},m(t,n){a(t,e,n)},p(t,n){16&n&&v(e,t[4])},d(t){t&&c(e)}}}function Ye(e){let n;return{c(){n=d("Back")},m(t,e){a(t,n,e)},p:t,d(t){t&&c(n)}}}function Ke(e){let n,i,s,r,o,d,p,h;function g(t,e){return t[0]?Ze:t[5]?Ve:void 0}let b=g(e),v=b&&b(e);function y(t,e){return t[1]||t[2]?Ye:Ge}let x=y(e),N=x(e);return{c(){n=u("div"),i=u("div"),v&&v.c(),s=f(),r=u("button"),N.c(),this.c=t,w(i,"width","100%"),w(i,"padding-right","15px"),$(r,"class",o="button is-primary "+(e[0]?"is-loading":"")),$(r,"type","submit"),r.disabled=d=e[3]||!!e[5],$(n,"class","is-flex is-justify-content-space-between is-align-items-center")},m(t,o){a(t,n,o),l(n,i),v&&v.m(i,null),l(n,s),l(n,r),N.m(r,null),p||(h=m(r,"click",e[8]),p=!0)},p(t,[e]){b===(b=g(t))&&v?v.p(t,e):(v&&v.d(1),v=b&&b(t),v&&(v.c(),v.m(i,null))),x===(x=y(t))&&N?N.p(t,e):(N.d(1),N=x(t),N&&(N.c(),N.m(r,null))),1&e&&o!==(o="button is-primary "+(t[0]?"is-loading":""))&&$(r,"class",o),40&e&&d!==(d=t[3]||!!t[5])&&(r.disabled=d)},i:t,o:t,d(t){t&&c(n),v&&v.d(),N.d(),p=!1,h()}}}function Xe(t,e,n){let i,s;var r;const l=null===(r=window.configs)||void 0===r?void 0:r.currentDeploymentStore;o(t,l,(t=>n(7,s=t)));let{loading:a}=e,{success:c}=e,{failed:u}=e,{disabled:d}=e,{label:f="Deploy"}=e;return t.$$set=t=>{"loading"in t&&n(0,a=t.loading),"success"in t&&n(1,c=t.success),"failed"in t&&n(2,u=t.failed),"disabled"in t&&n(3,d=t.disabled),"label"in t&&n(4,f=t.label)},t.$$.update=()=>{128&t.$$.dirty&&n(5,i=s)},[a,c,u,d,f,i,l,s,function(e){M.call(this,t,e)}]}customElements.define("tf-select-node-id",We);class Je extends j{constructor(t){super(),it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},Xe,Ke,r,{loading:0,success:1,failed:2,disabled:3,label:4},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["loading","success","failed","disabled","label"]}get loading(){return this.$$.ctx[0]}set loading(t){this.$$set({loading:t}),H()}get success(){return this.$$.ctx[1]}set success(t){this.$$set({success:t}),H()}get failed(){return this.$$.ctx[2]}set failed(t){this.$$set({failed:t}),H()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),H()}get label(){return this.$$.ctx[4]}set label(t){this.$$set({label:t}),H()}}function Qe(t){let e;return{c(){e=u("div"),e.textContent="Your solution is now starting. Please be patient",$(e,"class","notification is-info")},m(t,n){a(t,e,n)},d(t){t&&c(e)}}}function tn(e){let n,i,s,r,o,m=e[2]&&Qe();return{c(){n=u("div"),i=d(e[1]),r=f(),m&&m.c(),o=p(),this.c=t,$(n,"class",s="notification is-"+e[0])},m(t,e){a(t,n,e),l(n,i),a(t,r,e),m&&m.m(t,e),a(t,o,e)},p(t,[e]){2&e&&v(i,t[1]),1&e&&s!==(s="notification is-"+t[0])&&$(n,"class",s),t[2]?m||(m=Qe(),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null)},i:t,o:t,d(t){t&&c(n),t&&c(r),m&&m.d(t),t&&c(o)}}}function en(t,e,n){let{type:i}=e,{message:s}=e,{deployed:r=!1}=e;return t.$$set=t=>{"type"in t&&n(0,i=t.type),"message"in t&&n(1,s=t.message),"deployed"in t&&n(2,r=t.deployed)},[i,s,r]}customElements.define("tf-deploy-btn",Je);class nn extends j{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},en,tn,r,{type:0,message:1,deployed:2},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["type","message","deployed"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),H()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),H()}get deployed(){return this.$$.ctx[2]}set deployed(t){this.$$set({deployed:t}),H()}}function sn(t,e,n){const i=t.slice();return i[9]=e[n],i}function rn(t){let e,n,i,s,r,o,l,u,d,m,h,g,$,b,v,y,w,x,N,E,_,k=t[0].contractId&&on(t);n=new be({props:{data:t[0].name,field:t[1]}});const P=[an,ln],I=[];function M(t,e){return t[0].publicIP?0:1}s=M(t),r=I[s]=P[s](t);let S=t[0].planetary&&dn(t);u=new be({props:{data:t[0].interfaces[0].network,field:t[3]}}),m=new be({props:{data:t[0].capacity.cpu,field:t[4]}}),g=new be({props:{data:t[0].capacity.memory,field:t[5]}});let O=t[0].mounts,D=[];for(let e=0;e<O.length;e+=1)D[e]=fn(sn(t,O,e));const A=t=>G(D[t],1,1,(()=>{D[t]=null}));v=new be({props:{data:t[0].interfaces[0].ip,field:t[6]}});let C=t[0].flist&&pn(t),R=t[0].env.CAPROVER_ROOT_DOMAIN&&mn(t),T=t[0].env.PEERTUBE_WEBSERVER_HOSTNAME&&hn(t),U=t[0].env.FUNKWHALE_HOSTNAME&&gn(t);return{c(){k&&k.c(),e=f(),Q(n.$$.fragment),i=f(),r.c(),o=f(),S&&S.c(),l=f(),Q(u.$$.fragment),d=f(),Q(m.$$.fragment),h=f(),Q(g.$$.fragment),$=f();for(let t=0;t<D.length;t+=1)D[t].c();b=f(),Q(v.$$.fragment),y=f(),C&&C.c(),w=f(),R&&R.c(),x=f(),T&&T.c(),N=f(),U&&U.c(),E=p()},m(t,r){k&&k.m(t,r),a(t,e,r),tt(n,t,r),a(t,i,r),I[s].m(t,r),a(t,o,r),S&&S.m(t,r),a(t,l,r),tt(u,t,r),a(t,d,r),tt(m,t,r),a(t,h,r),tt(g,t,r),a(t,$,r);for(let e=0;e<D.length;e+=1)D[e].m(t,r);a(t,b,r),tt(v,t,r),a(t,y,r),C&&C.m(t,r),a(t,w,r),R&&R.m(t,r),a(t,x,r),T&&T.m(t,r),a(t,N,r),U&&U.m(t,r),a(t,E,r),_=!0},p(t,i){t[0].contractId?k?(k.p(t,i),1&i&&Z(k,1)):(k=on(t),k.c(),Z(k,1),k.m(e.parentNode,e)):k&&(W(),G(k,1,1,(()=>{k=null})),V());const a={};1&i&&(a.data=t[0].name),n.$set(a);let c=s;s=M(t),s===c?I[s].p(t,i):(W(),G(I[c],1,1,(()=>{I[c]=null})),V(),r=I[s],r?r.p(t,i):(r=I[s]=P[s](t),r.c()),Z(r,1),r.m(o.parentNode,o)),t[0].planetary?S?(S.p(t,i),1&i&&Z(S,1)):(S=dn(t),S.c(),Z(S,1),S.m(l.parentNode,l)):S&&(W(),G(S,1,1,(()=>{S=null})),V());const d={};1&i&&(d.data=t[0].interfaces[0].network),u.$set(d);const f={};1&i&&(f.data=t[0].capacity.cpu),m.$set(f);const p={};if(1&i&&(p.data=t[0].capacity.memory),g.$set(p),1&i){let e;for(O=t[0].mounts,e=0;e<O.length;e+=1){const n=sn(t,O,e);D[e]?(D[e].p(n,i),Z(D[e],1)):(D[e]=fn(n),D[e].c(),Z(D[e],1),D[e].m(b.parentNode,b))}for(W(),e=O.length;e<D.length;e+=1)A(e);V()}const h={};1&i&&(h.data=t[0].interfaces[0].ip),v.$set(h),t[0].flist?C?(C.p(t,i),1&i&&Z(C,1)):(C=pn(t),C.c(),Z(C,1),C.m(w.parentNode,w)):C&&(W(),G(C,1,1,(()=>{C=null})),V()),t[0].env.CAPROVER_ROOT_DOMAIN?R?(R.p(t,i),1&i&&Z(R,1)):(R=mn(t),R.c(),Z(R,1),R.m(x.parentNode,x)):R&&(W(),G(R,1,1,(()=>{R=null})),V()),t[0].env.PEERTUBE_WEBSERVER_HOSTNAME?T?(T.p(t,i),1&i&&Z(T,1)):(T=hn(t),T.c(),Z(T,1),T.m(N.parentNode,N)):T&&(W(),G(T,1,1,(()=>{T=null})),V()),t[0].env.FUNKWHALE_HOSTNAME?U?(U.p(t,i),1&i&&Z(U,1)):(U=gn(t),U.c(),Z(U,1),U.m(E.parentNode,E)):U&&(W(),G(U,1,1,(()=>{U=null})),V())},i(t){if(!_){Z(k),Z(n.$$.fragment,t),Z(r),Z(S),Z(u.$$.fragment,t),Z(m.$$.fragment,t),Z(g.$$.fragment,t);for(let t=0;t<O.length;t+=1)Z(D[t]);Z(v.$$.fragment,t),Z(C),Z(R),Z(T),Z(U),_=!0}},o(t){G(k),G(n.$$.fragment,t),G(r),G(S),G(u.$$.fragment,t),G(m.$$.fragment,t),G(g.$$.fragment,t),D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)G(D[t]);G(v.$$.fragment,t),G(C),G(R),G(T),G(U),_=!1},d(t){k&&k.d(t),t&&c(e),et(n,t),t&&c(i),I[s].d(t),t&&c(o),S&&S.d(t),t&&c(l),et(u,t),t&&c(d),et(m,t),t&&c(h),et(g,t),t&&c($),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(D,t),t&&c(b),et(v,t),t&&c(y),C&&C.d(t),t&&c(w),R&&R.d(t),t&&c(x),T&&T.d(t),t&&c(N),U&&U.d(t),t&&c(E)}}}function on(t){let e,n;return e=new be({props:{data:t[0].contractId,field:t[8]}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data=t[0].contractId),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function ln(e){let n,i;return n=new be({props:{data:!1,field:{label:"Public IP",symbol:"publicIP",type:"checkbox",disabled:!0}}}),{c(){Q(n.$$.fragment)},m(t,e){tt(n,t,e),i=!0},p:t,i(t){i||(Z(n.$$.fragment,t),i=!0)},o(t){G(n.$$.fragment,t),i=!1},d(t){et(n,t)}}}function an(t){let e,n,i,s=!!t[0].publicIP.ip&&cn(t),r=!!t[0].publicIP.ip6&&un(t);return{c(){s&&s.c(),e=f(),r&&r.c(),n=p()},m(t,o){s&&s.m(t,o),a(t,e,o),r&&r.m(t,o),a(t,n,o),i=!0},p(t,i){t[0].publicIP.ip?s?(s.p(t,i),1&i&&Z(s,1)):(s=cn(t),s.c(),Z(s,1),s.m(e.parentNode,e)):s&&(W(),G(s,1,1,(()=>{s=null})),V()),t[0].publicIP.ip6?r?(r.p(t,i),1&i&&Z(r,1)):(r=un(t),r.c(),Z(r,1),r.m(n.parentNode,n)):r&&(W(),G(r,1,1,(()=>{r=null})),V())},i(t){i||(Z(s),Z(r),i=!0)},o(t){G(s),G(r),i=!1},d(t){s&&s.d(t),t&&c(e),r&&r.d(t),t&&c(n)}}}function cn(t){let e,n;return e=new be({props:{data:t[0].publicIP.ip,field:{label:"Public IPv4",symbol:"publicIP",type:"text",disabled:!0}}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data=t[0].publicIP.ip),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function un(t){let e,n;return e=new be({props:{data:t[0].publicIP.ip6,field:{label:"Public IPv6",symbol:"publicIP6",type:"text",disabled:!0}}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data=t[0].publicIP.ip6),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function dn(t){let e,n;return e=new be({props:{data:t[0].planetary,field:t[2]}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data=t[0].planetary),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function fn(t){let e,n;return e=new be({props:{data:Math.ceil(t[9].size/1073741824),field:{label:`Disk(${t[9].mountPoint}) GB`,symbol:"size",type:"number",disabled:!0}}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data=Math.ceil(t[9].size/1073741824)),1&n&&(i.field={label:`Disk(${t[9].mountPoint}) GB`,symbol:"size",type:"number",disabled:!0}),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function pn(t){let e,n;return e=new be({props:{data:t[0].flist,field:t[7]}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data=t[0].flist),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function mn(t){let e,n;return e=new be({props:{data:"http://captain."+t[0].env.CAPROVER_ROOT_DOMAIN,field:{label:"Domain",symbol:"domain",type:"text",disabled:!0,tooltip:`Default Password: ${t[0].env.DEFAULT_PASSWORD?t[0].env.DEFAULT_PASSWORD:"captain42"}`}}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data="http://captain."+t[0].env.CAPROVER_ROOT_DOMAIN),1&n&&(i.field={label:"Domain",symbol:"domain",type:"text",disabled:!0,tooltip:`Default Password: ${t[0].env.DEFAULT_PASSWORD?t[0].env.DEFAULT_PASSWORD:"captain42"}`}),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function hn(t){let e,n;return e=new be({props:{data:"https://"+t[0].env.PEERTUBE_WEBSERVER_HOSTNAME,field:{label:"Domain",symbol:"domain",type:"text",disabled:!0}}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data="https://"+t[0].env.PEERTUBE_WEBSERVER_HOSTNAME),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function gn(t){let e,n;return e=new be({props:{data:"https://"+t[0].env.FUNKWHALE_HOSTNAME,field:{label:"Domain",symbol:"domain",type:"text",disabled:!0}}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.data="https://"+t[0].env.FUNKWHALE_HOSTNAME),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function $n(e){let n,i,s=e[0]&&rn(e);return{c(){s&&s.c(),n=p(),this.c=t},m(t,e){s&&s.m(t,e),a(t,n,e),i=!0},p(t,[e]){t[0]?s?(s.p(t,e),1&e&&Z(s,1)):(s=rn(t),s.c(),Z(s,1),s.m(n.parentNode,n)):s&&(W(),G(s,1,1,(()=>{s=null})),V())},i(t){i||(Z(s),i=!0)},o(t){G(s),i=!1},d(t){s&&s.d(t),t&&c(n)}}}function bn(t,e,n){let{vm:i}=e;return t.$$set=t=>{"vm"in t&&n(0,i=t.vm)},[i,{label:"Name",symbol:"name",type:"text",disabled:!0},{label:"\tPlanetary Network IP",symbol:"planetary",type:"text",disabled:!0},{label:"Network Name",symbol:"network",type:"text",disabled:!0},{label:"CPU",symbol:"cpu",type:"number",disabled:!0},{label:"Memory",symbol:"memory",type:"number",disabled:!0},{label:"WireGuard",symbol:"wireguard",type:"text",disabled:!0},{label:"Flist",symbol:"flist",type:"text",disabled:!0},{label:"Contract ID",symbol:"contractId",type:"number",disabled:!0}]}customElements.define("tf-alert",nn);class vn extends j{constructor(t){super(),it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},bn,$n,r,{vm:0},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["vm"]}get vm(){return this.$$.ctx[0]}set vm(t){this.$$set({vm:t}),H()}}function yn(e){let n,i,s,r,o,p,h,g,b;return{c(){n=u("div"),i=d(e[4]),s=f(),r=u("hr"),o=f(),p=u("div"),h=u("button"),h.textContent="Copy",$(n,"class","json"),$(h,"class","button is-primary"),$(p,"class","is-flex is-justify-content-flex-end")},m(t,c){a(t,n,c),l(n,i),a(t,s,c),a(t,r,c),a(t,o,c),a(t,p,c),l(p,h),g||(b=m(h,"click",e[13]),g=!0)},p(t,e){16&e&&v(i,t[4])},i:t,o:t,d(t){t&&c(n),t&&c(s),t&&c(r),t&&c(o),t&&c(p),g=!1,b()}}}function wn(t){let e,n,i,s,r;function o(e){t[12](e)}let l={tabs:t[2]};return void 0!==t[3]&&(l.active=t[3]),e=new _e({props:l}),O.push((()=>J(e,"active",o))),s=new vn({props:{vm:t[0][t[3]]}}),{c(){Q(e.$$.fragment),i=f(),Q(s.$$.fragment)},m(t,n){tt(e,t,n),a(t,i,n),tt(s,t,n),r=!0},p(t,i){const r={};4&i&&(r.tabs=t[2]),!n&&8&i&&(n=!0,r.active=t[3],U((()=>n=!1))),e.$set(r);const o={};9&i&&(o.vm=t[0][t[3]]),s.$set(o)},i(t){r||(Z(e.$$.fragment,t),Z(s.$$.fragment,t),r=!0)},o(t){G(e.$$.fragment,t),G(s.$$.fragment,t),r=!1},d(t){et(e,t),t&&c(i),et(s,t)}}}function xn(e){let n,s,r,o,d,p,b,v,y,w,x,N,E,_,k,P,I,M;function S(t){e[11](t)}let D={tabs:e[6]};void 0!==e[1]&&(D.active=e[1]),v=new _e({props:D}),O.push((()=>J(v,"active",S)));const A=[wn,yn],C=[];function R(t,e){return"details"===t[1]?0:"json"===t[1]?1:-1}return~(N=R(e))&&(E=C[N]=A[N](e)),{c(){n=u("div"),s=f(),r=u("div"),o=u("div"),d=f(),p=u("div"),b=u("div"),Q(v.$$.fragment),w=f(),x=u("section"),E&&E.c(),_=f(),k=u("button"),this.c=t,$(o,"class","modal-background"),$(x,"class","content"),$(b,"class","box"),$(p,"class","modal-content"),$(k,"class","modal-close is-large"),$(k,"aria-label","close"),$(r,"class","modal is-active")},m(t,i){a(t,n,i),n.innerHTML=e[7],a(t,s,i),a(t,r,i),l(r,o),l(r,d),l(r,p),l(p,b),tt(v,b,null),l(b,w),l(b,x),~N&&C[N].m(x,null),l(r,_),l(r,k),P=!0,I||(M=[m(o,"click",h(e[10])),m(p,"click",g(e[9])),m(k,"click",h(e[14]))],I=!0)},p(t,[e]){const n={};!y&&2&e&&(y=!0,n.active=t[1],U((()=>y=!1))),v.$set(n);let i=N;N=R(t),N===i?~N&&C[N].p(t,e):(E&&(W(),G(C[i],1,1,(()=>{C[i]=null})),V()),~N?(E=C[N],E?E.p(t,e):(E=C[N]=A[N](t),E.c()),Z(E,1),E.m(x,null)):E=null)},i(t){P||(Z(v.$$.fragment,t),Z(E),P=!0)},o(t){G(v.$$.fragment,t),G(E),P=!1},d(t){t&&c(n),t&&c(s),t&&c(r),et(v),~N&&C[N].d(),I=!1,i(M)}}}function Nn(t,e,n){let i;const s=I();let r="details",{data:o}=e;let l=[],a=[],c="0";return t.$$set=t=>{"data"in t&&n(8,o=t.data)},t.$$.update=()=>{256&t.$$.dirty&&n(4,i=o?JSON.stringify(o,void 0,4):""),256&t.$$.dirty&&o&&n(0,l=o.masters?[o.masters[0],...o.workers]:[o]),257&t.$$.dirty&&o&&l.length&&n(2,a=l.map((({name:t},e)=>({label:t,value:e.toString()}))))},[l,r,a,c,i,s,[{label:"Details",value:"details"},{label:"JSON",value:"json"}],"\n<style>\n  .modal-content {\n    width: calc(100% - 30px);\n    max-height: 70vh;\n    transform: translateY(30px);\n    background-color: white;\n  }\n\n  .modal-content::-webkit-scrollbar-thumb {\n    background-color: #d3d3d3;\n  }\n  \n  .modal-content::-webkit-scrollbar {\n    width: 10px;\n  }\n\n  .content {\n    overflow-x: hidden;\n    overflow-y: auto;\n    background-color: #fff;\n  }\n\n  .modal-content > div,\n  .content {\n    width: 100%;\n  }\n\n  .json {\n    white-space: pre-wrap;\n  }\n</style>\n",o,function(e){M.call(this,t,e)},()=>s("closed"),function(t){r=t,n(1,r)},function(t){c=t,n(3,c)},()=>function(t){const e=document.createElement("textarea");e.value=t,e.style.display="block",document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),e.remove()}(i),()=>s("closed")]}customElements.define("tf-format-data",vn);class En extends j{constructor(t){super(),it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},Nn,xn,r,{data:8},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["data"]}get data(){return this.$$.ctx[8]}set data(t){this.$$set({data:t}),H()}}function _n(t){let e;return{c(){e=u("div"),e.textContent="Your solution is now starting. Please be patient",$(e,"class","notification is-info")},m(t,n){a(t,e,n)},d(t){t&&c(e)}}}function kn(e){let n,i,s,r,o,m,h,g,b,y,x,N,E,_,k,P,I,M,S,O,D,A,C=e[4]&&_n();return{c(){n=u("div"),i=d(e[1]),s=f(),r=u("hr"),o=f(),m=u("h3"),m.textContent="Deployment Info:",h=f(),g=u("ul"),b=u("li"),y=d("Domain: "),x=u("a"),N=d("https://"),E=d(e[2]),_=d("/"),P=f(),I=u("li"),M=d("Planetary IP: "),S=d(e[3]),D=f(),C&&C.c(),A=p(),this.c=t,w(m,"font-weight","bold"),$(x,"href",k=`https://${e[2]}/`),$(x,"target","_blank"),$(g,"class","ml-2"),$(n,"class",O="notification is-"+e[0])},m(t,e){a(t,n,e),l(n,i),l(n,s),l(n,r),l(n,o),l(n,m),l(n,h),l(n,g),l(g,b),l(b,y),l(b,x),l(x,N),l(x,E),l(x,_),l(g,P),l(g,I),l(I,M),l(I,S),a(t,D,e),C&&C.m(t,e),a(t,A,e)},p(t,[e]){2&e&&v(i,t[1]),4&e&&v(E,t[2]),4&e&&k!==(k=`https://${t[2]}/`)&&$(x,"href",k),8&e&&v(S,t[3]),1&e&&O!==(O="notification is-"+t[0])&&$(n,"class",O),t[4]?C||(C=_n(),C.c(),C.m(A.parentNode,A)):C&&(C.d(1),C=null)},i:t,o:t,d(t){t&&c(n),t&&c(D),C&&C.d(t),t&&c(A)}}}function Pn(t,e,n){let{type:i}=e,{message:s}=e,{domain:r}=e,{planetaryIP:o}=e,{deployed:l=!1}=e;return t.$$set=t=>{"type"in t&&n(0,i=t.type),"message"in t&&n(1,s=t.message),"domain"in t&&n(2,r=t.domain),"planetaryIP"in t&&n(3,o=t.planetaryIP),"deployed"in t&&n(4,l=t.deployed)},[i,s,r,o,l]}customElements.define("tf-deployment-model",En);class In extends j{constructor(t){super(),it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},Pn,kn,r,{type:0,message:1,domain:2,planetaryIP:3,deployed:4},null),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),H()))}static get observedAttributes(){return["type","message","domain","planetaryIP","deployed"]}get type(){return this.$$.ctx[0]}set type(t){this.$$set({type:t}),H()}get message(){return this.$$.ctx[1]}set message(t){this.$$set({message:t}),H()}get domain(){return this.$$.ctx[2]}set domain(t){this.$$set({domain:t}),H()}get planetaryIP(){return this.$$.ctx[3]}set planetaryIP(t){this.$$set({planetaryIP:t}),H()}get deployed(){return this.$$.ctx[4]}set deployed(t){this.$$set({deployed:t}),H()}}customElements.define("tf-alert",In);function Mn(t,e,n){const i=t.slice();return i[45]=e[n],i[50]=e,i[51]=n,i}function Sn(t,e,n){const i=t.slice();return i[45]=e[n],i[46]=e,i[47]=n,i}function On(t,e,n){const i=t.slice();return i[45]=e[n],i[48]=e,i[49]=n,i}function Dn(t){let e,n,i,s,r,o,l;function u(e){t[23](e)}let d={tabs:t[17]};void 0!==t[10]&&(d.active=t[10]),e=new _e({props:d}),O.push((()=>J(e,"active",u)));const m=[qn,Un],h=[];function g(t,e){return"base"===t[10]?0:"mail"===t[10]?1:-1}return~(s=g(t))&&(r=h[s]=m[s](t)),{c(){Q(e.$$.fragment),i=f(),r&&r.c(),o=p()},m(t,n){tt(e,t,n),a(t,i,n),~s&&h[s].m(t,n),a(t,o,n),l=!0},p(t,i){const l={};!n&&1024&i[0]&&(n=!0,l.active=t[10],U((()=>n=!1))),e.$set(l);let a=s;s=g(t),s===a?~s&&h[s].p(t,i):(r&&(W(),G(h[a],1,1,(()=>{h[a]=null})),V()),~s?(r=h[s],r?r.p(t,i):(r=h[s]=m[s](t),r.c()),Z(r,1),r.m(o.parentNode,o)):r=null)},i(t){l||(Z(e.$$.fragment,t),Z(r),l=!0)},o(t){G(e.$$.fragment,t),G(r),l=!1},d(t){et(e,t),t&&c(i),~s&&h[s].d(t),t&&c(o)}}}function An(t){let e,n;return e=new nn({props:{type:"danger",message:t[13]||"Failed to deploy owncloud."}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};8192&n[0]&&(i.message=t[13]||"Failed to deploy owncloud."),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Cn(t){let e,n;return e=new In({props:{type:"success",message:"Successfully deployed owncloud.",planetaryIP:t[9],domain:t[8],deployed:!0}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};512&n[0]&&(i.planetaryIP=t[9]),256&n[0]&&(i.domain=t[8]),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Rn(e){let n,i;return n=new nn({props:{type:"info",message:"Please activate a profile from the profile manager"}}),{c(){Q(n.$$.fragment)},m(t,e){tt(n,t,e),i=!0},p:t,i(t){i||(Z(n.$$.fragment,t),i=!0)},o(t){G(n.$$.fragment,t),i=!1},d(t){et(n,t)}}}function Tn(t){let e,n;return e=new nn({props:{type:"info",message:t[15]?.message??"Loading..."}}),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};32768&n[0]&&(i.message=t[15]?.message??"Loading..."),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Un(t){let e,n,i,s,r=[],o=new Map,l=t[12];const d=t=>t[45].symbol;for(let e=0;e<l.length;e+=1){let n=Mn(t,l,e),i=d(n);o.set(i,r[e]=Ln(i,n))}return{c(){e=u("div"),e.innerHTML="<p>configure these settings only If you have an smtp service and you\n            know what you’re doing.</p>",n=f();for(let t=0;t<r.length;t+=1)r[t].c();i=p(),$(e,"class","notification is-warning is-light")},m(t,o){a(t,e,o),a(t,n,o);for(let e=0;e<r.length;e+=1)r[e].m(t,o);a(t,i,o),s=!0},p(t,e){4097&e[0]&&(l=t[12],W(),r=X(r,e,d,1,t,l,o,i.parentNode,K,Ln,i,Mn),V())},i(t){if(!s){for(let t=0;t<l.length;t+=1)Z(r[t]);s=!0}},o(t){for(let t=0;t<r.length;t+=1)G(r[t]);s=!1},d(t){t&&c(e),t&&c(n);for(let e=0;e<r.length;e+=1)r[e].d(t);t&&c(i)}}}function qn(t){let e,n,i,s,r,o,l,u,d,p,m,h,g,$,b=[],v=new Map,y=[],w=new Map;function x(e){t[24](e)}function N(e){t[25](e)}let E={field:t[5]};void 0!==t[0].name&&(E.data=t[0].name),void 0!==t[5].invalid&&(E.invalid=t[5].invalid),e=new be({props:E}),O.push((()=>J(e,"data",x))),O.push((()=>J(e,"invalid",N)));let _=t[6];const k=t=>t[45].symbol;for(let e=0;e<_.length;e+=1){let n=On(t,_,e),i=k(n);v.set(i,b[e]=jn(i,n))}function P(e){t[29](e)}let I={field:t[18]};void 0!==t[0].disks[0].size&&(I.data=t[0].disks[0].size),o=new be({props:I}),O.push((()=>J(o,"data",P)));let M=t[11];const S=t=>t[45].symbol;for(let e=0;e<M.length;e+=1){let n=Sn(t,M,e),i=S(n);w.set(i,y[e]=Zn(i,n))}function D(e){t[33](e)}function A(e){t[34](e)}function C(e){t[35](e)}let R={publicIp:t[0].publicIp,cpu:t[0].cpu,memory:t[0].memory,ssd:t[0].disks.reduce(Kn,0),filters:t[0].selection.filters,profile:t[1],nodes:t[0].selection.nodes};return void 0!==t[0].selection.type&&(R.nodeSelection=t[0].selection.type),void 0!==t[0].nodeId&&(R.data=t[0].nodeId),void 0!==t[7]&&(R.status=t[7]),p=new We({props:R}),O.push((()=>J(p,"nodeSelection",D))),O.push((()=>J(p,"data",A))),O.push((()=>J(p,"status",C))),p.$on("fetch",t[36]),{c(){Q(e.$$.fragment),s=f();for(let t=0;t<b.length;t+=1)b[t].c();r=f(),Q(o.$$.fragment),u=f();for(let t=0;t<y.length;t+=1)y[t].c();d=f(),Q(p.$$.fragment)},m(t,n){tt(e,t,n),a(t,s,n);for(let e=0;e<b.length;e+=1)b[e].m(t,n);a(t,r,n),tt(o,t,n),a(t,u,n);for(let e=0;e<y.length;e+=1)y[e].m(t,n);a(t,d,n),tt(p,t,n),$=!0},p(t,s){const a={};32&s[0]&&(a.field=t[5]),!n&&1&s[0]&&(n=!0,a.data=t[0].name,U((()=>n=!1))),!i&&32&s[0]&&(i=!0,a.invalid=t[5].invalid,U((()=>i=!1))),e.$set(a),65&s[0]&&(_=t[6],W(),b=X(b,s,k,1,t,_,v,r.parentNode,K,jn,r,On),V());const c={};!l&&1&s[0]&&(l=!0,c.data=t[0].disks[0].size,U((()=>l=!1))),o.$set(c),2049&s[0]&&(M=t[11],W(),y=X(y,s,S,1,t,M,w,d.parentNode,K,Zn,d,Sn),V());const u={};1&s[0]&&(u.publicIp=t[0].publicIp),1&s[0]&&(u.cpu=t[0].cpu),1&s[0]&&(u.memory=t[0].memory),1&s[0]&&(u.ssd=t[0].disks.reduce(Kn,0)),1&s[0]&&(u.filters=t[0].selection.filters),2&s[0]&&(u.profile=t[1]),1&s[0]&&(u.nodes=t[0].selection.nodes),!m&&1&s[0]&&(m=!0,u.nodeSelection=t[0].selection.type,U((()=>m=!1))),!h&&1&s[0]&&(h=!0,u.data=t[0].nodeId,U((()=>h=!1))),!g&&128&s[0]&&(g=!0,u.status=t[7],U((()=>g=!1))),p.$set(u)},i(t){if(!$){Z(e.$$.fragment,t);for(let t=0;t<_.length;t+=1)Z(b[t]);Z(o.$$.fragment,t);for(let t=0;t<M.length;t+=1)Z(y[t]);Z(p.$$.fragment,t),$=!0}},o(t){G(e.$$.fragment,t);for(let t=0;t<b.length;t+=1)G(b[t]);G(o.$$.fragment,t);for(let t=0;t<y.length;t+=1)G(y[t]);G(p.$$.fragment,t),$=!1},d(t){et(e,t),t&&c(s);for(let e=0;e<b.length;e+=1)b[e].d(t);t&&c(r),et(o,t),t&&c(u);for(let e=0;e<y.length;e+=1)y[e].d(t);t&&c(d),et(p,t)}}}function Fn(t){let e,n,i;function s(e){t[39](e,t[45])}let r={field:t[45]};return void 0!==t[0][t[45].symbol]&&(r.data=t[0][t[45].symbol]),e=new be({props:r}),O.push((()=>J(e,"data",s))),{c(){Q(e.$$.fragment)},m(t,n){tt(e,t,n),i=!0},p(i,s){t=i;const r={};4096&s[0]&&(r.field=t[45]),!n&&4097&s[0]&&(n=!0,r.data=t[0][t[45].symbol],U((()=>n=!1))),e.$set(r)},i(t){i||(Z(e.$$.fragment,t),i=!0)},o(t){G(e.$$.fragment,t),i=!1},d(t){et(e,t)}}}function Hn(t){let e,n,i,s;function r(e){t[37](e,t[45])}function o(e){t[38](e,t[45])}let l={field:t[45]};return void 0!==t[0][t[45].symbol]&&(l.data=t[0][t[45].symbol]),void 0!==t[45].invalid&&(l.invalid=t[45].invalid),e=new be({props:l}),O.push((()=>J(e,"data",r))),O.push((()=>J(e,"invalid",o))),{c(){Q(e.$$.fragment)},m(t,n){tt(e,t,n),s=!0},p(s,r){t=s;const o={};4096&r[0]&&(o.field=t[45]),!n&&4097&r[0]&&(n=!0,o.data=t[0][t[45].symbol],U((()=>n=!1))),!i&&4096&r[0]&&(i=!0,o.invalid=t[45].invalid,U((()=>i=!1))),e.$set(o)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){et(e,t)}}}function Ln(t,e){let n,i,s,r,o;const l=[Hn,Fn],u=[];function d(t,e){return void 0!==t[45].invalid?0:1}return i=d(e),s=u[i]=l[i](e),{key:t,first:null,c(){n=p(),s.c(),r=p(),this.first=n},m(t,e){a(t,n,e),u[i].m(t,e),a(t,r,e),o=!0},p(t,n){let o=i;i=d(e=t),i===o?u[i].p(e,n):(W(),G(u[o],1,1,(()=>{u[o]=null})),V(),s=u[i],s?s.p(e,n):(s=u[i]=l[i](e),s.c()),Z(s,1),s.m(r.parentNode,r))},i(t){o||(Z(s),o=!0)},o(t){G(s),o=!1},d(t){t&&c(n),u[i].d(t),t&&c(r)}}}function zn(t){let e,n,i;function s(e){t[28](e,t[45])}let r={field:t[45]};return void 0!==t[0][t[45].symbol]&&(r.data=t[0][t[45].symbol]),e=new be({props:r}),O.push((()=>J(e,"data",s))),{c(){Q(e.$$.fragment)},m(t,n){tt(e,t,n),i=!0},p(i,s){t=i;const r={};64&s[0]&&(r.field=t[45]),!n&&65&s[0]&&(n=!0,r.data=t[0][t[45].symbol],U((()=>n=!1))),e.$set(r)},i(t){i||(Z(e.$$.fragment,t),i=!0)},o(t){G(e.$$.fragment,t),i=!1},d(t){et(e,t)}}}function Bn(t){let e,n,i,s;function r(e){t[26](e,t[45])}function o(e){t[27](e,t[45])}let l={field:t[45]};return void 0!==t[0][t[45].symbol]&&(l.data=t[0][t[45].symbol]),void 0!==t[45].invalid&&(l.invalid=t[45].invalid),e=new be({props:l}),O.push((()=>J(e,"data",r))),O.push((()=>J(e,"invalid",o))),{c(){Q(e.$$.fragment)},m(t,n){tt(e,t,n),s=!0},p(s,r){t=s;const o={};64&r[0]&&(o.field=t[45]),!n&&65&r[0]&&(n=!0,o.data=t[0][t[45].symbol],U((()=>n=!1))),!i&&64&r[0]&&(i=!0,o.invalid=t[45].invalid,U((()=>i=!1))),e.$set(o)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){et(e,t)}}}function jn(t,e){let n,i,s,r,o;const l=[Bn,zn],u=[];function d(t,e){return void 0!==t[45].invalid?0:1}return i=d(e),s=u[i]=l[i](e),{key:t,first:null,c(){n=p(),s.c(),r=p(),this.first=n},m(t,e){a(t,n,e),u[i].m(t,e),a(t,r,e),o=!0},p(t,n){let o=i;i=d(e=t),i===o?u[i].p(e,n):(W(),G(u[o],1,1,(()=>{u[o]=null})),V(),s=u[i],s?s.p(e,n):(s=u[i]=l[i](e),s.c()),Z(s,1),s.m(r.parentNode,r))},i(t){o||(Z(s),o=!0)},o(t){G(s),o=!1},d(t){t&&c(n),u[i].d(t),t&&c(r)}}}function Wn(t){let e,n,i;function s(e){t[32](e,t[45])}let r={field:t[45]};return void 0!==t[0][t[45].symbol]&&(r.data=t[0][t[45].symbol]),e=new be({props:r}),O.push((()=>J(e,"data",s))),{c(){Q(e.$$.fragment)},m(t,n){tt(e,t,n),i=!0},p(i,s){t=i;const r={};2048&s[0]&&(r.field=t[45]),!n&&2049&s[0]&&(n=!0,r.data=t[0][t[45].symbol],U((()=>n=!1))),e.$set(r)},i(t){i||(Z(e.$$.fragment,t),i=!0)},o(t){G(e.$$.fragment,t),i=!1},d(t){et(e,t)}}}function Vn(t){let e,n,i,s;function r(e){t[30](e,t[45])}function o(e){t[31](e,t[45])}let l={field:t[45]};return void 0!==t[0][t[45].symbol]&&(l.data=t[0][t[45].symbol]),void 0!==t[45].invalid&&(l.invalid=t[45].invalid),e=new be({props:l}),O.push((()=>J(e,"data",r))),O.push((()=>J(e,"invalid",o))),{c(){Q(e.$$.fragment)},m(t,n){tt(e,t,n),s=!0},p(s,r){t=s;const o={};2048&r[0]&&(o.field=t[45]),!n&&2049&r[0]&&(n=!0,o.data=t[0][t[45].symbol],U((()=>n=!1))),!i&&2048&r[0]&&(i=!0,o.invalid=t[45].invalid,U((()=>i=!1))),e.$set(o)},i(t){s||(Z(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){et(e,t)}}}function Zn(t,e){let n,i,s,r,o;const l=[Vn,Wn],u=[];function d(t,e){return void 0!==t[45].invalid?0:1}return i=d(e),s=u[i]=l[i](e),{key:t,first:null,c(){n=p(),s.c(),r=p(),this.first=n},m(t,e){a(t,n,e),u[i].m(t,e),a(t,r,e),o=!0},p(t,n){let o=i;i=d(e=t),i===o?u[i].p(e,n):(W(),G(u[o],1,1,(()=>{u[o]=null})),V(),s=u[i],s?s.p(e,n):(s=u[i]=l[i](e),s.c()),Z(s,1),s.m(r.parentNode,r))},i(t){o||(Z(s),o=!0)},o(t){G(s),o=!1},d(t){t&&c(n),u[i].d(t),t&&c(r)}}}function Gn(t){let e,n;return e=new En({props:{data:t[14]}}),e.$on("closed",t[41]),{c(){Q(e.$$.fragment)},m(t,i){tt(e,t,i),n=!0},p(t,n){const i={};16384&n[0]&&(i.data=t[14]),e.$set(i)},i(t){n||(Z(e.$$.fragment,t),n=!0)},o(t){G(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Yn(e){let n,i,s,r,o,d,g,b,v,y,x,N,E,_,k,P,I;n=new ee({}),n.$on("profile",e[22]);const M=[Tn,Rn,Cn,An,Dn],S=[];function O(t,e){return t[2]||null!==t[15]&&"VM"===t[15].type?0:t[1]?t[3]?2:t[4]?3:4:1}v=O(e),y=S[v]=M[v](e),N=new Je({props:{disabled:e[16],loading:e[2],failed:e[4],success:e[3]}}),N.$on("click",e[40]);let D=e[14]&&Gn(e);return{c(){Q(n.$$.fragment),i=f(),s=u("div"),r=u("form"),o=u("h4"),o.textContent="Deploy an owncloud Instance",d=f(),g=u("hr"),b=f(),y.c(),x=f(),Q(N.$$.fragment),E=f(),D&&D.c(),_=p(),this.c=t,$(o,"class","is-size-4"),$(r,"class","box"),w(s,"padding","15px")},m(t,c){tt(n,t,c),a(t,i,c),a(t,s,c),l(s,r),l(r,o),l(r,d),l(r,g),l(r,b),S[v].m(r,null),l(r,x),tt(N,r,null),a(t,E,c),D&&D.m(t,c),a(t,_,c),k=!0,P||(I=m(r,"submit",h(e[20])),P=!0)},p(t,e){let n=v;v=O(t),v===n?S[v].p(t,e):(W(),G(S[n],1,1,(()=>{S[n]=null})),V(),y=S[v],y?y.p(t,e):(y=S[v]=M[v](t),y.c()),Z(y,1),y.m(r,x));const i={};65536&e[0]&&(i.disabled=t[16]),4&e[0]&&(i.loading=t[2]),16&e[0]&&(i.failed=t[4]),8&e[0]&&(i.success=t[3]),N.$set(i),t[14]?D?(D.p(t,e),16384&e[0]&&Z(D,1)):(D=Gn(t),D.c(),Z(D,1),D.m(_.parentNode,_)):D&&(W(),G(D,1,1,(()=>{D=null})),V())},i(t){k||(Z(n.$$.fragment,t),Z(y),Z(N.$$.fragment,t),Z(D),k=!0)},o(t){G(n.$$.fragment,t),G(y),G(N.$$.fragment,t),G(D),k=!1},d(t){et(n,t),t&&c(i),t&&c(s),S[v].d(),et(N),t&&c(E),D&&D.d(t),t&&c(_),P=!1,I()}}}const Kn=(t,e)=>t+e.size;function Xn(t,e,n){let i,s,r;var l,a;let c,u,d,f=new Mt;f.disks=[new _t];let p="base",m=!1,h=!1,g=!1;const $={label:"Name",placeholder:"Owncloud Instance Name",symbol:"name",type:"text",validator:ht,invalid:!1};let b=[{label:"CPU",symbol:"cpu",placeholder:"CPU Cores",type:"number",validator:yt,invalid:!1},{label:"Memory (MB)",symbol:"memory",placeholder:"Your Memory in MB",type:"number",validator:bt,invalid:!1}],v=[{label:"Admin User Name",symbol:"adminUsername",placeholder:"admin",type:"text",validator:ht,invalid:!1},{label:"Admin Password (It's important to save the admin username and password for login)",symbol:"adminPassword",placeholder:"password",type:"password",invalid:!1},{label:"Admin Email Address",symbol:"adminEmail",placeholder:"admin@example.com",type:"text",validator:gt,invalid:!1}];const y={label:"Disk (GB)",symbol:"disk",placeholder:"Your Disk size in GB",type:"number",validator:vt,invalid:!1};let w,x,N,E=[{label:"Host Name",symbol:"smtpHost",placeholder:"smtp.example.com",type:"text",validator:It,invalid:!1},{label:"Port",symbol:"smtpPort",placeholder:"587",type:"text",validator:wt,invalid:!1},{label:"User Name",symbol:"smtpHostUser",placeholder:"user@example.com",type:"text",validator:$t,invalid:!1},{label:"Password",symbol:"smtpHostPassword",placeholder:"password",type:"password",invalid:!1}];const _=null===(l=window.configs)||void 0===l?void 0:l.deploymentStore,k=null===(a=window.configs)||void 0===a?void 0:a.currentDeploymentStore;o(t,k,(t=>n(21,r=t)));return t.$$.update=()=>{255&t.$$.dirty[0]&&n(16,i=(m||!f.valid)&&!(h||g)||!d||"valid"!==N||$.invalid||b.reduce(((t,{invalid:e})=>t||!!e),!1)),2097152&t.$$.dirty[0]&&n(15,s=r)},[f,d,m,h,g,$,b,N,c,u,p,v,E,w,x,s,i,[{label:"Base",value:"base"},{label:"Mail Server",value:"mail"}],y,k,async function(){if(n(2,m=!0),n(3,h=!1),n(4,g=!1),n(13,w=void 0),!function(t=2){const e=window.configs.balanceStore.getBalance();return e&&e>=t}())return n(4,g=!0),n(2,m=!1),void n(13,w="No enough balance to execute! Transaction requires 2 TFT at least in your wallet.");Jt(f,d).then((t=>{_.set(0),n(3,h=!0),n(14,x=t.deployment),n(8,c=t.domain),n(9,u=t.planetaryIP)})).catch((t=>{n(4,g=!0),n(13,w="string"==typeof t?t:t.message)})).finally((()=>{n(2,m=!1)}))},r,({detail:t})=>{n(1,d=t),t&&n(0,f.envs[0]=new Et(void 0,"SSH_KEY",t?.sshKey),f)},function(t){p=t,n(10,p)},function(e){t.$$.not_equal(f.name,e)&&(f.name=e,n(0,f))},function(e){t.$$.not_equal($.invalid,e)&&($.invalid=e,n(5,$))},function(e,i){t.$$.not_equal(f[i.symbol],e)&&(f[i.symbol]=e,n(0,f))},function(e,i){t.$$.not_equal(i.invalid,e)&&(i.invalid=e,n(6,b))},function(e,i){t.$$.not_equal(f[i.symbol],e)&&(f[i.symbol]=e,n(0,f))},function(e){t.$$.not_equal(f.disks[0].size,e)&&(f.disks[0].size=e,n(0,f))},function(e,i){t.$$.not_equal(f[i.symbol],e)&&(f[i.symbol]=e,n(0,f))},function(e,i){t.$$.not_equal(i.invalid,e)&&(i.invalid=e,n(11,v))},function(e,i){t.$$.not_equal(f[i.symbol],e)&&(f[i.symbol]=e,n(0,f))},function(e){t.$$.not_equal(f.selection.type,e)&&(f.selection.type=e,n(0,f))},function(e){t.$$.not_equal(f.nodeId,e)&&(f.nodeId=e,n(0,f))},function(t){N=t,n(7,N)},({detail:t})=>n(0,f.selection.nodes=t,f),function(e,i){t.$$.not_equal(f[i.symbol],e)&&(f[i.symbol]=e,n(0,f))},function(e,i){t.$$.not_equal(i.invalid,e)&&(i.invalid=e,n(12,E))},function(e,i){t.$$.not_equal(f[i.symbol],e)&&(f[i.symbol]=e,n(0,f))},t=>{(h||g)&&(t.preventDefault(),n(3,h=!1),n(4,g=!1),n(2,m=!1))},()=>n(14,x=null)]}customElements.define("tf-owncloud",class extends j{constructor(t){super(),this.shadowRoot.innerHTML='<style>@import url("https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css");</style>',it(this,{target:this.shadowRoot,props:N(this.attributes),customElement:!0},Xn,Yn,r,{},null,[-1,-1]),t&&t.target&&a(t.target,this,t.anchor)}})}();
